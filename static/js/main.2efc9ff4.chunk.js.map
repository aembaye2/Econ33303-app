{"version":3,"sources":["components/Navbar/NavbarElements.js","components/Navbar/index.js","components/canvas/CanvasToolbar.tsx","components/canvas/DrawableCanvasState.tsx","components/canvas/lib/fabrictool.ts","components/canvas/lib/singlearrowhead.ts","components/canvas/lib/doublearrowhead.ts","components/canvas/lib/circle.ts","components/canvas/lib/coordinate.ts","components/canvas/lib/curve.ts","components/canvas/lib/freedraw.ts","components/canvas/lib/line.ts","components/canvas/lib/point.ts","components/canvas/lib/polygon.ts","components/canvas/lib/rect.ts","components/canvas/lib/text.ts","components/canvas/lib/index.ts","components/canvas/lib/transform.ts","components/canvas/helpers.js","components/canvas/DrawableCanvas.tsx","components/canvas/constants.ts","components/canvas/DrawingModeSelector.tsx","components/canvas/DrawingApp.tsx","components/QuestionsComponent.tsx","components/utils.js","pages/pset1/data.ts","pages/pset1/Pset1.tsx","pages/index.js","components/Footer.js","App.js","index.tsx","components/canvas/CanvasToolbar.module.css","components/canvas/img/undo.png","components/canvas/img/bin.png"],"names":["Nav","styled","nav","_templateObject","_taggedTemplateLiteral","NavLink","Link","_templateObject2","Bars","FaBars","_templateObject3","NavMenu","div","_templateObject4","_templateObject5","_templateObject6","Navbar","React","createElement","Fragment","to","SquareIcon","_ref","imgUrl","altText","invertX","size","enabled","clickCallback","src","className","concat","styles","disabled","invertx","alt","title","height","width","onClick","CanvasToolbar","_ref2","topPosition","leftPosition","canUndo","canRedo","downloadCallback","downloadCallback2","saveCallback","undoCallback","redoCallback","resetCallback","iconElements","undo","bin","style","position","top","left","display","flexDirection","gap","zIndex","map","e","key","NO_ACTION","shouldReloadCanvas","RELOAD_CANVAS","canvasStateReducer","state","action","type","Error","isEmpty","currentState","history","undoStack","redoStack","_objectSpread","initialState","isEqual","undoOverHistoryMaxCount","length","slice","lastState","nextState","CanvasStateContext","createContext","CanvasStateProvider","children","canvasState","dispatch","useReducer","saveState","useCallback","redo","resetState","Provider","value","FabricTool","constructor","canvas","_canvas","this","SingleArrowHeadTool","arguments","isMouseDown","strokeWidth","strokeColor","currentLine","fabric","Line","startCircle","Circle","singlearrow","Group","endTriangle","Triangle","configureCanvas","isDrawingMode","selection","forEachObject","o","selectable","evented","on","onMouseDown","onMouseMove","onMouseUp","onMouseOut","off","_clicked","pointer","getPointer","points","x","y","fill","stroke","originX","originY","add","set","x2","y2","remove","yy2","yy1","xx2","xx1","y1","x1","toObject","angle","Math","atan2","PI","util","object","extend","call","toolType","renderAll","updatedgroup","DoubleArrowHeadTool","doublearrow","startTriangle","setCoords","CircleTool","fillColor","currentCircle","currentStartX","currentStartY","_minRadius","linearDistance","point1","point2","xs","ys","sqrt","radius","_radius","max","CoordinateTool","horizontalLine","verticalLine","coordinateCircle","coordinatesTextX","coordinatesTextY","tempHorizontalLine","tempVerticalLine","tempCoordinateCircle","tempCoordinatesText","coordinates_group","tempCoordinates_group","scaleFactors","canvasWidth","canvasHeight","clearTemporaryObjects","button","drawLinesAndCoordinates","drawTemporaryLinesAndCoordinates","strokeDashArray","xx","yy","Text","toFixed","fontSize","CurveTool","curvePath","Path","tempCurvePath","controlPoints","tempCurve","finalCurve","_pathString","onMouseDoubleClick","_start","push","generateCurvePathData","linePath","pop","d3","curve","alpha","lineGenerator","FreedrawTool","freeDrawingBrush","color","LineTool","PointTool","displayRadius","PolygonTool","currentPath","RectTool","currentRect","Rect","_minLength","transparentCorners","strokeUniform","noScaleCache","abs","_width","_height","TextTool","text","IText","setActiveObject","enterEditing","hiddenTextarea","focus","tools","circle","coordinate","freedraw","line","polygon","rect","singlearrowhead","doublearrowhead","transform","args","handleDoubleClick","activeObject","getActiveObject","point","canvasRef","useRef","HTMLCanvasElement","canvasInstance","Canvas","backgroundCanvasRef","backgroundCanvasInstance","StaticCanvas","current","tempCanvas","document","tempContext","getContext","drawImage","dataURL","toDataURL","link","href","download","click","downloadCallback4Json","canvasData","backgroundData","toJSON","background","mainCanvasData","mainCanvas","jsonBlob","Blob","JSON","stringify","URL","createObjectURL","DrawableCanvas","index","backgroundColor","backgroundImageURL","drawingMode","initialDrawing","displayToolbar","useContext","useEffect","enableRetinaScaling","loadFromJSON","_canvasInstance$curre","group","objects","hasControls","lockMovementX","lockMovementY","lockRotation","rectLeft","rectTop","rectWidth","rectHeight","i","tick","toString","hLine","vLine","firstElement","shift","filteredObjects","filter","obj","undefined","customBackground2","canvasElement","addEventListener","preventDefault","_canvasInstance$curre2","_backgroundCanvasInst","removeEventListener","dispose","bgImage","Image","onload","_backgroundCanvasInst2","_canvasInstance$curre3","cleanupToolEvents","handleMouseUp","_canvasInstance$curre4","canvasJSON","_canvasInstance$curre5","_canvasInstance$curre6","saveToLocalStorage","localStorage","setItem","console","log","_canvasInstance$curre7","savedDrawing","getItem","parsedDrawing","parse","_canvasInstance$curre8","_canvasInstance$curre9","id","ref","border","save2Storage","error","window","confirm","DrawingModeSelector","setDrawingMode","modes","mode","icon","Slash","description","MoveUpRight","MoveDiagonal","Dot","Hexagon","process","Spline","Type","flexWrap","Icon","margin","padding","cursor","alignItems","justifyContent","borderRadius","DrawingApp","useState","setStrokeColor","setStrokeWidth","canvasProps","marginBottom","marginLeft","htmlFor","onChange","target","min","Number","QuestionsComponent","_questions$currentQue","questions","userId","quizName","userAnswers","setUserAnswers","storedAnswers","fullname","setFullname","currentQuestionIndex","setCurrentQuestionIndex","showResults","setShowResults","handleInputChange","questionId","prev","marginTop","location","reload","textAlign","async","userInputData","question","htmlContent","forEach","qtype","options","option","answerText","replace","padEnd","substring","combinedCanvasImage","opt","filename","image","quality","html2canvas","scale","jsPDF","unit","format","orientation","html2pdf","default","from","save","handleGeneratePDF","name","checked","maxLength","handleBack","mainCanvasId","backgroundCanvasId","getElementById","backgroundCanvas","tempCtx","saveCanvasImage2storage","marginRight","quiz","Ref","user","data","Pset1","q","Home","Footer","App","Router","Routes","Route","path","element","ReactDOM","render","StrictMode","module","exports"],"mappings":"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","file":"static/js/main.2efc9ff4.chunk.js","sourcesContent":["// components/Navbar/navbarElements.js\r\n\r\nimport { FaBars } from \"react-icons/fa\";\r\nimport { NavLink as Link } from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\n\r\nexport const Nav = styled.nav`\r\n  background: #63d471;\r\n  height: 85px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 0.2rem calc((100vw - 1000px) / 2);\r\n  z-index: 12;\r\n  /* Third Nav */\r\n  /* justify-content: flex-start; */\r\n`;\r\n\r\nexport const NavLink = styled(Link)`\r\n  color: #808080;\r\n  display: flex;\r\n  align-items: center;\r\n  text-decoration: none;\r\n  padding: 0 1rem;\r\n  height: 100%;\r\n  cursor: pointer;\r\n  &.active {\r\n    color: #000000;\r\n  }\r\n`;\r\n\r\nexport const Bars = styled(FaBars)`\r\n  display: none;\r\n  color: #808080;\r\n  @media screen and (max-width: 768px) {\r\n    display: block;\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    transform: translate(-100%, 75%);\r\n    font-size: 1.8rem;\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nexport const NavMenu = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-right: -24px;\r\n  /* Second Nav */\r\n  /* margin-right: 24px; */\r\n  /* Third Nav */\r\n  /* width: 100vw;\r\n  white-space: nowrap; */\r\n  @media screen and (max-width: 768px) {\r\n    display: none;\r\n  }\r\n`;\r\n\r\nexport const NavBtn = styled.nav`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-right: 24px;\r\n  /* Third Nav */\r\n  /* justify-content: flex-end;\r\n  width: 100vw; */\r\n  @media screen and (max-width: 768px) {\r\n    display: none;\r\n  }\r\n`;\r\n\r\nexport const NavBtnLink = styled(Link)`\r\n  border-radius: 4px;\r\n  background: #808080;\r\n  padding: 10px 22px;\r\n  color: #000000;\r\n  outline: none;\r\n  border: none;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease-in-out;\r\n  text-decoration: none;\r\n  /* Second Nav */\r\n  margin-left: 24px;\r\n  &:hover {\r\n    transition: all 0.2s ease-in-out;\r\n    background: #fff;\r\n    color: #808080;\r\n  }\r\n`;\r\n","// components/Navbar/index.js\r\n\r\nimport React from \"react\"\r\nimport { Nav, NavLink, Bars, NavMenu } from \"./NavbarElements\"\r\n\r\nconst Navbar = () => {\r\n  return (\r\n    <>\r\n      <Nav>\r\n        <Bars />\r\n        <NavMenu>\r\n          {/* <NavLink to=\"/ActLes09\">Activity-01</NavLink>\r\n          <NavLink to=\"Page3/\">Quiz3</NavLink> */}\r\n          <NavLink to=\"/Pset1\">Pset1</NavLink>\r\n        </NavMenu>\r\n      </Nav>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Navbar\r\n","// CanvasToolbar.tsx\n//\"use client\";\nimport React from \"react\"\nimport styles from \"./CanvasToolbar.module.css\"\n//import { Save } from \"lucide-react\";\n\n// const bin = \"/img/bin.png\"; // it is in the public folder in nextjs app\n// const undo = \"/img/undo.png\"\n// const download = \"/img/download.png\"\n// //const download2 = \"/img/circle-check-big.png\";\n// const save = \"/img/save.svg\"\n\nimport bin from \"./img/bin.png\"\nimport undo from \"./img/undo.png\"\nimport download from \"./img/download.png\"\n//const download2 = \"/img/circle-check-big.png\";\nconst save = \"/img/save.svg\"\n\ninterface SquareIconProps {\n  imgUrl: string\n  altText: string\n  invertX?: boolean\n  size: number\n  enabled: boolean\n  clickCallback: () => void\n}\n\nconst SquareIcon = ({\n  imgUrl,\n  altText,\n  invertX = false,\n  size,\n  enabled,\n  clickCallback,\n}: SquareIconProps) => (\n  <img\n    src={imgUrl}\n    className={`\n    ${enabled ? styles.enabled : styles.disabled} ${\n      invertX ? \"\" : styles.invertx\n    }\n    `}\n    alt={altText}\n    title={altText}\n    height={`${size}px`}\n    width={`${size}px`}\n    onClick={clickCallback}\n  />\n)\n\ninterface CanvasToolbarProps {\n  topPosition: number\n  leftPosition: number\n  canUndo: boolean\n  canRedo: boolean\n  downloadCallback: () => void\n  downloadCallback2: () => void\n  saveCallback: () => void\n  undoCallback: () => void\n  redoCallback: () => void\n  resetCallback: () => void\n}\n\nconst CanvasToolbar = ({\n  topPosition,\n  leftPosition,\n  canUndo,\n  canRedo,\n  downloadCallback,\n  downloadCallback2,\n  saveCallback,\n  undoCallback,\n  redoCallback,\n  resetCallback,\n}: CanvasToolbarProps) => {\n  const GAP_BETWEEN_ICONS = 4\n  const ICON_SIZE = 24\n  const iconElements = [\n    // {\n    //   imgUrl: download,\n    //   altText: \"download\",\n    //   invertX: false,\n    //   enabled: true,\n    //   clickCallback: downloadCallback,\n    // },\n    // {\n    //   imgUrl: download2,\n    //   altText: \"complete\",\n    //   invertX: true,\n    //   enabled: true,\n    //   clickCallback: downloadCallback2,\n    // },\n    // {\n    //   imgUrl: save,\n    //   altText: \"saveto storage\",\n    //   invertX: false,\n    //   enabled: true,\n    //   clickCallback: saveCallback,\n    // },\n    {\n      imgUrl: undo,\n      altText: \"Undo\",\n      invertX: true,\n      enabled: canUndo,\n      clickCallback: canUndo ? undoCallback : () => {},\n    },\n    {\n      imgUrl: undo,\n      altText: \"Redo\",\n      invertX: false,\n      enabled: canRedo,\n      clickCallback: canRedo ? redoCallback : () => {},\n    },\n    {\n      imgUrl: bin,\n      altText: \"Reset canvas & history\",\n      invertX: false,\n      enabled: true,\n      clickCallback: resetCallback,\n    },\n  ]\n\n  return (\n    <div\n      style={{\n        position: \"absolute\",\n        top: topPosition + 4,\n        left: leftPosition, //0,\n        display: \"flex\",\n        flexDirection: \"column\",\n        gap: GAP_BETWEEN_ICONS,\n        zIndex: 20,\n      }}\n    >\n      {iconElements.map((e) => (\n        <SquareIcon\n          key={e.altText}\n          imgUrl={e.imgUrl}\n          altText={e.altText}\n          invertX={e.invertX}\n          size={ICON_SIZE}\n          enabled={e.enabled}\n          clickCallback={e.clickCallback}\n        />\n      ))}\n    </div>\n  )\n}\n\nexport default CanvasToolbar\n","//DrawableCanvasState.tsx\n\"use client\";\nimport React, {\n  createContext,\n  useReducer,\n  useContext,\n  useCallback,\n} from \"react\";\n\nimport { isEmpty, isEqual } from \"lodash\";\n\nconst HISTORY_MAX_COUNT = 100;\n\ninterface CanvasHistory {\n  undoStack: Object[]; // store previous canvas states\n  redoStack: Object[]; // store undone canvas states\n}\n\ninterface CanvasAction {\n  shouldReloadCanvas: boolean; // reload currentState into app canvas, on undo/redo\n}\n\nconst NO_ACTION: CanvasAction = {\n  shouldReloadCanvas: false,\n};\n\nconst RELOAD_CANVAS: CanvasAction = {\n  shouldReloadCanvas: true,\n};\n\ninterface CanvasState {\n  history: CanvasHistory;\n  action: CanvasAction;\n  initialState: Object; // first currentState for app\n  currentState: Object; // current canvas state as canvas.toJSON()\n}\n\ninterface Action {\n  type: \"save\" | \"undo\" | \"redo\" | \"reset\";\n  state?: Object;\n}\n\nconst canvasStateReducer = (\n  state: CanvasState,\n  action: Action\n): CanvasState => {\n  switch (action.type) {\n    case \"save\":\n      if (!action.state) throw new Error(\"No action state to save\");\n      if (isEmpty(state.currentState)) {\n        return {\n          history: {\n            undoStack: [],\n            redoStack: [],\n          },\n          action: { ...NO_ACTION },\n          initialState: action.state,\n          currentState: action.state,\n        };\n      } else if (isEqual(action.state, state.currentState)) {\n        return {\n          history: { ...state.history },\n          action: { ...NO_ACTION },\n          initialState: state.initialState,\n          currentState: state.currentState,\n        };\n      } else {\n        const undoOverHistoryMaxCount =\n          state.history.undoStack.length >= HISTORY_MAX_COUNT;\n        return {\n          history: {\n            undoStack: [\n              ...state.history.undoStack.slice(undoOverHistoryMaxCount ? 1 : 0),\n              state.currentState,\n            ],\n            redoStack: [],\n          },\n          action: { ...NO_ACTION },\n          initialState:\n            state.initialState == null\n              ? state.currentState\n              : state.initialState,\n          currentState: action.state,\n        };\n      }\n    case \"undo\":\n      if (state.history.undoStack.length === 0) {\n        return {\n          history: { ...state.history },\n          action: { ...NO_ACTION },\n          initialState: state.initialState,\n          currentState: state.currentState,\n        };\n      } else {\n        const lastState =\n          state.history.undoStack[state.history.undoStack.length - 1];\n        return {\n          history: {\n            undoStack: state.history.undoStack.slice(0, -1),\n            redoStack: [...state.history.redoStack, state.currentState],\n          },\n          action: { ...RELOAD_CANVAS },\n          initialState: state.initialState,\n          currentState: lastState,\n        };\n      }\n    case \"redo\":\n      if (state.history.redoStack.length > 0) {\n        const nextState =\n          state.history.redoStack[state.history.redoStack.length - 1];\n        return {\n          history: {\n            undoStack: [...state.history.undoStack, state.currentState],\n            redoStack: state.history.redoStack.slice(0, -1),\n          },\n          action: { ...RELOAD_CANVAS },\n          initialState: state.initialState,\n          currentState: nextState,\n        };\n      } else {\n        return {\n          history: { ...state.history },\n          action: { ...NO_ACTION },\n          initialState: state.initialState,\n          currentState: state.currentState,\n        };\n      }\n    case \"reset\":\n      if (!action.state) throw new Error(\"No action state to store in reset\");\n      return {\n        history: {\n          undoStack: [],\n          redoStack: [],\n        },\n        action: { ...RELOAD_CANVAS },\n        initialState: action.state,\n        currentState: action.state,\n      };\n    default:\n      throw new Error(\"TS should protect from this\");\n  }\n};\n\nconst initialState: CanvasState = {\n  history: {\n    undoStack: [],\n    redoStack: [],\n  },\n  action: {\n    shouldReloadCanvas: false,\n  },\n  initialState: {},\n  currentState: {},\n};\n\ninterface CanvasStateContextProps {\n  canvasState: CanvasState;\n  saveState: (state: Object) => void;\n  undo: () => void;\n  redo: () => void;\n  canUndo: boolean;\n  canRedo: boolean;\n  resetState: (state: Object) => void;\n}\n\nconst CanvasStateContext = createContext<CanvasStateContextProps>(\n  {} as CanvasStateContextProps\n);\n\nexport const CanvasStateProvider = ({\n  children,\n}: React.PropsWithChildren<{}>) => {\n  const [canvasState, dispatch] = useReducer(canvasStateReducer, initialState);\n\n  // Setup our callback functions for saving I think the canvas\n  const saveState = useCallback(\n    (state: Object) => {\n      dispatch({ type: \"save\", state });\n    },\n    [dispatch]\n  );\n\n  const undo = useCallback(() => {\n    dispatch({ type: \"undo\" });\n  }, [dispatch]);\n\n  const redo = useCallback(() => {\n    dispatch({ type: \"redo\" });\n  }, [dispatch]);\n\n  const resetState = useCallback(\n    (state: Object) => {\n      dispatch({ type: \"reset\", state });\n    },\n    [dispatch]\n  );\n\n  const canUndo = canvasState.history.undoStack.length > 0;\n  const canRedo = canvasState.history.redoStack.length > 0;\n\n  return (\n    <CanvasStateContext.Provider\n      value={{\n        canvasState,\n        saveState,\n        undo,\n        redo,\n        canUndo,\n        canRedo,\n        resetState,\n      }}\n    >\n      {children}\n    </CanvasStateContext.Provider>\n  );\n};\n\n/**\n * Hook to get data out of context\n */\nexport const useCanvasState = () => {\n  return useContext(CanvasStateContext);\n};\n","import { fabric } from \"fabric\"\n\nexport interface ConfigureCanvasProps {\n  fillColor: string\n  strokeWidth: number\n  strokeColor: string\n  displayRadius: number\n  scaleFactors: number[] // Add scaleFactors here\n  canvasHeight: number // Add this line\n  canvasWidth: number // Add this line\n}\n\n/**\n * Base class for any fabric tool that configures and draws on canvas\n */\nabstract class FabricTool {\n  protected _canvas: fabric.Canvas\n  /**\n   * Pass Fabric canvas by reference so tools can configure it\n   */\n  constructor(canvas: fabric.Canvas) {\n    this._canvas = canvas\n  }\n\n  /*\n   * Configure canvas and return a callback to clean eventListeners\n   * @param args\n   */\n  abstract configureCanvas(args: ConfigureCanvasProps): () => void\n}\n\nexport default FabricTool\n","//SingleArrowHeadTool\nimport { fabric } from \"fabric\"\nimport FabricTool, { ConfigureCanvasProps } from \"./fabrictool\"\n\nclass SingleArrowHeadTool extends FabricTool {\n  isMouseDown: boolean = false\n  strokeWidth: number = 10\n  strokeColor: string = \"#ffffff\"\n  currentLine: fabric.Line = new fabric.Line()\n  startCircle: fabric.Circle = new fabric.Circle()\n  singlearrow: fabric.Group = new fabric.Group()\n  //startTriangle: fabric.Triangle = new fabric.Triangle()\n  endTriangle: fabric.Triangle = new fabric.Triangle()\n\n  configureCanvas({\n    strokeWidth,\n    strokeColor,\n  }: ConfigureCanvasProps): () => void {\n    this._canvas.isDrawingMode = false\n    this._canvas.selection = false\n    this._canvas.forEachObject((o) => (o.selectable = o.evented = false))\n\n    this.strokeWidth = strokeWidth\n    this.strokeColor = strokeColor\n\n    this._canvas.on(\"mouse:down\", (e: any) => this.onMouseDown(e))\n    this._canvas.on(\"mouse:move\", (e: any) => this.onMouseMove(e))\n    this._canvas.on(\"mouse:up\", (e: any) => this.onMouseUp(e))\n    this._canvas.on(\"mouse:out\", (e: any) => this.onMouseOut(e))\n    return () => {\n      this._canvas.off(\"mouse:down\")\n      this._canvas.off(\"mouse:move\")\n      this._canvas.off(\"mouse:up\")\n      this._canvas.off(\"mouse:out\")\n    }\n  }\n\n  onMouseDown(o: any) {\n    let canvas = this._canvas\n    let _clicked = o.e[\"button\"]\n    this.isMouseDown = true\n    var pointer = canvas.getPointer(o.e)\n    var points = [pointer.x, pointer.y, pointer.x, pointer.y]\n    this.currentLine = new fabric.Line(points, {\n      strokeWidth: this.strokeWidth,\n      fill: this.strokeColor,\n      stroke: this.strokeColor,\n      originX: \"center\",\n      originY: \"center\",\n      selectable: false,\n      evented: false,\n    })\n\n    if (_clicked === 0) {\n      //canvas.add(this.currentLine)\n      canvas.add(this.singlearrow)\n    }\n  }\n\n  onMouseMove(o: any) {\n    if (!this.isMouseDown) return\n    let canvas = this._canvas\n    var pointer = canvas.getPointer(o.e)\n    this.currentLine.set({ x2: pointer.x, y2: pointer.y }) //takes the first point's coordinates from mouse down event\n    //this.currentLine.setCoords()\n\n    ////// Remove the previous group if it exists\n    if (this.singlearrow) {\n      canvas.remove(this.singlearrow)\n    }\n\n    // Initialize variables\n    let yy2: any = 0 // Initialization\n    let yy1: any = 0 // Initialization\n    let xx2: any = 0 // Initialization\n    let xx1: any = 0 // Initialization\n\n    yy2 = this.currentLine.y2\n    yy1 = this.currentLine.y1\n    xx2 = this.currentLine.x2\n    xx1 = this.currentLine.x1\n\n    var angle = Math.atan2(\n      // this.currentLine?.y2 - this.currentLine?.y1,\n      // this.currentLine?.x2 - this.currentLine?.x1\n      yy2 - yy1,\n      xx2 - xx1\n    )\n\n    // Create a triangle at the end of the line\n    this.endTriangle = new fabric.Triangle({\n      left: pointer.x,\n      top: pointer.y,\n      originX: \"center\",\n      originY: \"center\",\n      strokeWidth: this.strokeWidth,\n      stroke: this.strokeColor,\n      fill: this.strokeColor,\n      selectable: false,\n      evented: false,\n      width: this.strokeWidth * 5,\n      height: this.strokeWidth * 5,\n      angle: angle * (180 / Math.PI) + 90, // Convert the angle to degrees and add 90 to align with the line\n    })\n\n    this.singlearrow = new fabric.Group(\n      [\n        this.currentLine, //this.startTriangle,\n        this.endTriangle,\n      ],\n      {\n        selectable: false,\n        evented: false,\n      }\n    )\n    // Add custom property to identify the tool\n    this.singlearrow.toObject = (function (toObject) {\n      return function (this: fabric.Object) {\n        return fabric.util.object.extend(toObject.call(this), {\n          toolType: \"SingleArrowHeadTool\",\n        })\n      }\n    })(this.singlearrow.toObject)\n    canvas.add(this.singlearrow)\n    canvas.renderAll()\n  }\n\n  onMouseUp(o: any) {\n    this.isMouseDown = false\n    let canvas = this._canvas\n    var updatedgroup = this.singlearrow\n    canvas.remove(this.singlearrow)\n    canvas.add(updatedgroup)\n    canvas.renderAll()\n  }\n\n  onMouseOut(o: any) {\n    this.isMouseDown = false\n  }\n}\n\nexport default SingleArrowHeadTool\n","//SingleArrowHeadTool\nimport { fabric } from \"fabric\"\nimport FabricTool, { ConfigureCanvasProps } from \"./fabrictool\"\n\nclass DoubleArrowHeadTool extends FabricTool {\n  isMouseDown: boolean = false\n  strokeWidth: number = 10\n  // yy2: number = 0\n  // yy1: number = 0\n  // xx2: number = 0\n  // xx1: number = 0\n  strokeColor: string = \"#ffffff\"\n  currentLine: fabric.Line = new fabric.Line()\n  startCircle: fabric.Circle = new fabric.Circle()\n  doublearrow: fabric.Group = new fabric.Group()\n  startTriangle: fabric.Triangle = new fabric.Triangle()\n  endTriangle: fabric.Triangle = new fabric.Triangle()\n\n  configureCanvas({\n    strokeWidth,\n    strokeColor,\n  }: ConfigureCanvasProps): () => void {\n    this._canvas.isDrawingMode = false\n    this._canvas.selection = false\n    this._canvas.forEachObject((o) => (o.selectable = o.evented = false))\n\n    this.strokeWidth = strokeWidth\n    this.strokeColor = strokeColor\n\n    this._canvas.on(\"mouse:down\", (e: any) => this.onMouseDown(e))\n    this._canvas.on(\"mouse:move\", (e: any) => this.onMouseMove(e))\n    this._canvas.on(\"mouse:up\", (e: any) => this.onMouseUp(e))\n    this._canvas.on(\"mouse:out\", (e: any) => this.onMouseOut(e))\n    return () => {\n      this._canvas.off(\"mouse:down\")\n      this._canvas.off(\"mouse:move\")\n      this._canvas.off(\"mouse:up\")\n      this._canvas.off(\"mouse:out\")\n    }\n  }\n\n  onMouseDown(o: any) {\n    let canvas = this._canvas\n    let _clicked = o.e[\"button\"]\n    this.isMouseDown = true\n    var pointer = canvas.getPointer(o.e)\n    var points = [pointer.x, pointer.y, pointer.x, pointer.y]\n    this.currentLine = new fabric.Line(points, {\n      strokeWidth: this.strokeWidth,\n      fill: this.strokeColor,\n      stroke: this.strokeColor,\n      originX: \"center\",\n      originY: \"center\",\n      selectable: false,\n      evented: false,\n    })\n\n    if (_clicked === 0) {\n      //canvas.add(this.currentLine)\n      canvas.add(this.doublearrow)\n    }\n  }\n\n  onMouseMove(o: any) {\n    if (!this.isMouseDown) return\n    let canvas = this._canvas\n    var pointer = canvas.getPointer(o.e)\n    this.currentLine.set({ x2: pointer.x, y2: pointer.y }) //takes the first point's coordinates from mouse down event\n    this.currentLine.setCoords()\n\n    ////// Remove the previous group if it exists\n    if (this.doublearrow) {\n      canvas.remove(this.doublearrow)\n    }\n\n    // Initialize variables\n    let yy2: any = 0 // Initialization\n    let yy1: any = 0 // Initialization\n    let xx2: any = 0 // Initialization\n    let xx1: any = 0 // Initialization\n\n    yy2 = this.currentLine.y2\n    yy1 = this.currentLine.y1\n    xx2 = this.currentLine.x2\n    xx1 = this.currentLine.x1\n\n    var angle = Math.atan2(yy2 - yy1, xx2 - xx1)\n\n    // Create a triangle at the end of the line\n    this.endTriangle = new fabric.Triangle({\n      left: pointer.x,\n      top: pointer.y,\n      originX: \"center\",\n      originY: \"center\",\n      strokeWidth: this.strokeWidth,\n      stroke: this.strokeColor,\n      fill: this.strokeColor,\n      selectable: false,\n      evented: false,\n      width: this.strokeWidth * 5,\n      height: this.strokeWidth * 5,\n      angle: angle * (180 / Math.PI) + 90, // Convert the angle to degrees and add 90 to align with the line\n    })\n\n    // Create a triangle at the start of the line\n    this.startTriangle = new fabric.Triangle({\n      left: this.currentLine.x1, //+ this.currentLine.left,\n      top: this.currentLine.y1, //+ this.currentLine.top,\n      originX: \"center\",\n      originY: \"center\",\n      strokeWidth: this.strokeWidth,\n      stroke: this.strokeColor,\n      fill: this.strokeColor,\n      selectable: false,\n      evented: false,\n      width: this.strokeWidth * 5,\n      height: this.strokeWidth * 5,\n      angle: angle * (180 / Math.PI) - 90, // Convert the angle to degrees and subtract 90 to align with the line\n    })\n\n    // Create a group and add the line and the triangles to it\n    this.doublearrow = new fabric.Group(\n      [this.currentLine, this.startTriangle, this.endTriangle],\n      {\n        selectable: false,\n        evented: false,\n      }\n    )\n\n    canvas.add(this.doublearrow)\n    canvas.renderAll()\n  }\n\n  onMouseUp(o: any) {\n    this.isMouseDown = false\n    let canvas = this._canvas\n    // if (this.currentLine.width === 0 && this.currentLine.height === 0) {\n    //   canvas.remove(this.currentLine)\n    // }\n    //canvas.remove(this.currentLine)\n    var updatedgroup = this.doublearrow\n    canvas.remove(this.doublearrow)\n    canvas.add(updatedgroup)\n    canvas.renderAll()\n  }\n\n  onMouseOut(o: any) {\n    this.isMouseDown = false\n  }\n}\n\nexport default DoubleArrowHeadTool\n","import { fabric } from \"fabric\"\nimport FabricTool, { ConfigureCanvasProps } from \"./fabrictool\"\n\nclass CircleTool extends FabricTool {\n  isMouseDown: boolean = false\n  fillColor: string = \"#ffffff\"\n  strokeWidth: number = 10\n  strokeColor: string = \"#ffffff\"\n  currentCircle: fabric.Circle = new fabric.Circle()\n  currentStartX: number = 0\n  currentStartY: number = 0\n  _minRadius: number = 10\n\n  configureCanvas({\n    strokeWidth,\n    strokeColor,\n    fillColor,\n  }: ConfigureCanvasProps): () => void {\n    this._canvas.isDrawingMode = false\n    this._canvas.selection = false\n    this._canvas.forEachObject((o) => (o.selectable = o.evented = false))\n\n    this.strokeWidth = strokeWidth\n    this.strokeColor = strokeColor\n    this.fillColor = fillColor\n    this._minRadius = strokeWidth\n\n    this._canvas.on(\"mouse:down\", (e: any) => this.onMouseDown(e))\n    this._canvas.on(\"mouse:move\", (e: any) => this.onMouseMove(e))\n    this._canvas.on(\"mouse:up\", (e: any) => this.onMouseUp(e))\n    this._canvas.on(\"mouse:out\", (e: any) => this.onMouseOut(e))\n    return () => {\n      this._canvas.off(\"mouse:down\")\n      this._canvas.off(\"mouse:move\")\n      this._canvas.off(\"mouse:up\")\n      this._canvas.off(\"mouse:out\")\n    }\n  }\n\n  onMouseDown(o: any) {\n    let canvas = this._canvas\n    let _clicked = o.e[\"button\"]\n    this.isMouseDown = true\n    let pointer = canvas.getPointer(o.e)\n    this.currentStartX = pointer.x\n    this.currentStartY = pointer.y\n    this.currentCircle = new fabric.Circle({\n      left: this.currentStartX,\n      top: this.currentStartY,\n      originX: \"left\",\n      originY: \"center\",\n      strokeWidth: this.strokeWidth,\n      stroke: this.strokeColor,\n      fill: this.fillColor,\n      selectable: false,\n      evented: false,\n      radius: this._minRadius,\n    })\n    if (_clicked === 0) {\n      canvas.add(this.currentCircle)\n    }\n  }\n\n  onMouseMove(o: any) {\n    if (!this.isMouseDown) return\n    let canvas = this._canvas\n    let pointer = canvas.getPointer(o.e)\n    let _radius =\n      this.linearDistance(\n        { x: this.currentStartX, y: this.currentStartY },\n        { x: pointer.x, y: pointer.y }\n      ) / 2\n    this.currentCircle.set({\n      radius: Math.max(_radius, this._minRadius),\n      angle:\n        (Math.atan2(\n          pointer.y - this.currentStartY,\n          pointer.x - this.currentStartX\n        ) *\n          180) /\n        Math.PI,\n    })\n    this.currentCircle.setCoords()\n    canvas.renderAll()\n  }\n\n  onMouseUp(o: any) {\n    this.isMouseDown = false\n  }\n\n  onMouseOut(o: any) {\n    this.isMouseDown = false\n  }\n\n  /**\n   * Calculate the distance of two x,y points\n   *\n   * @param point1 an object with x,y attributes representing the start point\n   * @param point2 an object with x,y attributes representing the end point\n   *\n   * @returns {number}\n   */\n  linearDistance = (point1: any, point2: any) => {\n    let xs = point2.x - point1.x\n    let ys = point2.y - point1.y\n    return Math.sqrt(xs * xs + ys * ys)\n  }\n}\n\nexport default CircleTool\n","import { fabric } from \"fabric\"\nimport FabricTool, { ConfigureCanvasProps } from \"./fabrictool\"\n\nclass CoordinateTool extends FabricTool {\n  isMouseDown: boolean = false\n  strokeColor: string = \"#ffffff\"\n  strokeWidth: number = 10\n  horizontalLine: fabric.Line | null = null\n  verticalLine: fabric.Line | null = null\n  coordinateCircle: fabric.Circle | null = null\n  //coordinatesText: fabric.Text | null = null\n  coordinatesTextX: fabric.Text | null = null\n  coordinatesTextY: fabric.Text | null = null\n  tempHorizontalLine: fabric.Line | null = null\n  tempVerticalLine: fabric.Line | null = null\n  tempCoordinateCircle: fabric.Circle | null = null\n  tempCoordinatesText: fabric.Text | null = null\n  coordinates_group: fabric.Group = new fabric.Group()\n  tempCoordinates_group: fabric.Group = new fabric.Group()\n  scaleFactors: number[] = [1, 1, 1, 1, 1, 1] // Define scaleFactors as an array; this are initializers; the real ones are set in the frontend .py script\n  canvasWidth: number = 1 // Define canvasHeight as a number\n  canvasHeight: number = 1\n\n  configureCanvas({\n    strokeWidth,\n    strokeColor,\n    scaleFactors,\n    canvasHeight,\n    canvasWidth, // Ensure canvasHeight is destructured\n  }: ConfigureCanvasProps): () => void {\n    this.scaleFactors = scaleFactors // Assign scaleFactors to this.scaleFactors\n    this.canvasHeight = canvasHeight // Assign canvasHeight to this.canvasHeight\n    this.canvasWidth = canvasWidth\n    this._canvas.isDrawingMode = false\n    this._canvas.selection = false\n    this._canvas.forEachObject((o) => (o.selectable = o.evented = false))\n\n    this.strokeWidth = strokeWidth\n    this.strokeColor = strokeColor\n\n    this._canvas.on(\"mouse:down\", (e: any) => this.onMouseDown(e))\n    this._canvas.on(\"mouse:move\", (e: any) => this.onMouseMove(e))\n    this._canvas.on(\"mouse:up\", (e: any) => this.onMouseUp(e))\n    this._canvas.on(\"mouse:out\", () => this.onMouseOut())\n    return () => {\n      this._canvas.off(\"mouse:down\")\n      this._canvas.off(\"mouse:move\")\n      this._canvas.off(\"mouse:up\")\n      this._canvas.off(\"mouse:out\")\n      this.clearTemporaryObjects()\n    }\n  }\n\n  onMouseDown(o: any) {\n    if (o.e.button === 0) {\n      this.isMouseDown = true\n      let canvas = this._canvas\n      let pointer = canvas.getPointer(o.e)\n      //this.updateLinesAndCircle(pointer.x, pointer.y)\n      this.drawLinesAndCoordinates(pointer.x, pointer.y)\n    }\n  }\n\n  onMouseMove(o: any) {\n    let canvas = this._canvas\n    let pointer = canvas.getPointer(o.e)\n    if (!this.isMouseDown) {\n      this.drawTemporaryLinesAndCoordinates(pointer.x, pointer.y)\n    }\n  }\n\n  onMouseUp(o: any) {\n    if (o.e.button === 0) {\n      this.isMouseDown = false\n      //let canvas = this._canvas\n      //let pointer = canvas.getPointer(o.e)\n      this.clearTemporaryObjects()\n      //this.drawLinesAndCoordinates(pointer.x, pointer.y)\n    }\n  }\n\n  onMouseOut() {\n    this.clearTemporaryObjects()\n  }\n\n  drawLinesAndCoordinates(x: number, y: number) {\n    let canvas = this._canvas\n    let strokeWidth = this.strokeWidth\n    let strokeColor = \"rgba(99, 99, 156, .75)\"\n    let canvasHeight = this.canvasHeight\n    let canvasWidth = this.canvasWidth\n\n    this.horizontalLine = new fabric.Line([this.scaleFactors[3], y, x, y], {\n      stroke: strokeColor,\n      strokeWidth: strokeWidth,\n      selectable: false,\n      evented: false,\n      strokeDashArray: [10, 5],\n    })\n\n    this.verticalLine = new fabric.Line([x, y, x, 0.85 * canvasHeight], {\n      stroke: strokeColor,\n      strokeWidth: strokeWidth,\n      selectable: false,\n      evented: false,\n      strokeDashArray: [10, 5],\n    })\n\n    this.coordinateCircle = new fabric.Circle({\n      left: x,\n      top: y,\n      radius: 5,\n      fill: strokeColor,\n      selectable: false,\n      evented: false,\n      originX: \"center\",\n      originY: \"center\",\n    })\n    // converted coordinates\n    // scaleFactors = [xmax, ymax, bottom_margin, left_margin, top_margin, right_margin]\n    let xx =\n      ((x - this.scaleFactors[3]) /\n        (canvasWidth - this.scaleFactors[3] - this.scaleFactors[5])) *\n      this.scaleFactors[0]\n    let yy =\n      this.scaleFactors[1] -\n      ((y - this.scaleFactors[4]) /\n        (canvasHeight - this.scaleFactors[4] - this.scaleFactors[2])) *\n        this.scaleFactors[1]\n\n    this.coordinatesTextX = new fabric.Text(\n      `${xx.toFixed(0)}`,\n\n      {\n        left: x + 0.01 * canvasWidth, //x + 10,\n        top: 0.8 * canvasHeight, //y + 10,\n        fill: strokeColor,\n        fontSize: 14,\n        selectable: false,\n        evented: false,\n      }\n    )\n\n    this.coordinatesTextY = new fabric.Text(\n      `${yy.toFixed(0)}`,\n\n      {\n        left: 0.13 * canvasWidth, //x + 10,\n        top: y - 0.035 * canvasHeight, //y + 10,\n        fill: strokeColor,\n        fontSize: 14,\n        selectable: false,\n        evented: false,\n      }\n    )\n\n    this.coordinates_group = new fabric.Group(\n      [\n        this.horizontalLine,\n        this.verticalLine,\n        this.coordinateCircle,\n        this.coordinatesTextX,\n        this.coordinatesTextY,\n      ],\n      {\n        selectable: false,\n        evented: false,\n      }\n    )\n\n    canvas.add(this.coordinates_group)\n    canvas.renderAll()\n  }\n\n  drawTemporaryLinesAndCoordinates(x: number, y: number) {\n    let canvas = this._canvas\n    let strokeWidth = this.strokeWidth\n    let strokeColor = \"rgba(51, 0, 20, 0.5)\"\n    let canvasHeight = this.canvasHeight\n    let canvasWidth = this.canvasWidth\n    this.clearTemporaryObjects()\n\n    this.tempHorizontalLine = new fabric.Line([0.12 * canvasWidth, y, x, y], {\n      //0 is the default value for the x1 coordinate\n      stroke: strokeColor,\n      strokeWidth: strokeWidth,\n      selectable: false,\n      evented: false,\n      strokeDashArray: [10, 5],\n    })\n\n    this.tempVerticalLine = new fabric.Line([x, y, x, 0.85 * canvasHeight], {\n      stroke: strokeColor,\n      strokeWidth: strokeWidth,\n      selectable: false,\n      evented: false,\n      strokeDashArray: [10, 5],\n    })\n\n    this.tempCoordinateCircle = new fabric.Circle({\n      left: x,\n      top: y,\n      radius: 5,\n      fill: strokeColor,\n      selectable: false,\n      evented: false,\n      originX: \"center\",\n      originY: \"center\",\n    })\n\n    let xx =\n      ((x - this.scaleFactors[3]) /\n        (canvasWidth - this.scaleFactors[3] - this.scaleFactors[5])) *\n      this.scaleFactors[0]\n    let yy =\n      this.scaleFactors[1] -\n      ((y - this.scaleFactors[4]) /\n        (canvasHeight - this.scaleFactors[4] - this.scaleFactors[2])) *\n        this.scaleFactors[1]\n    this.tempCoordinatesText = new fabric.Text(\n      `(${xx.toFixed(0)}, ${yy.toFixed(0)})`,\n      //`(${x.toFixed(0)}, ${y.toFixed(0)})`,\n      {\n        left: x + 10,\n        top: y + 10,\n        fill: strokeColor,\n        fontSize: 14,\n        selectable: false,\n        evented: false,\n      }\n    )\n\n    this.tempCoordinates_group = new fabric.Group(\n      [\n        this.tempHorizontalLine,\n        this.tempVerticalLine,\n        this.tempCoordinateCircle,\n        this.tempCoordinatesText,\n      ],\n      {\n        selectable: false,\n        evented: false,\n      }\n    )\n\n    canvas.add(this.tempCoordinates_group)\n    canvas.renderAll()\n  }\n\n  clearTemporaryObjects() {\n    let canvas = this._canvas\n    if (this.tempCoordinates_group) canvas.remove(this.tempCoordinates_group)\n    //this.tempCoordinates_group= null\n  }\n}\n\nexport default CoordinateTool\n","import { fabric } from \"fabric\"\nimport FabricTool, { ConfigureCanvasProps } from \"./fabrictool\"\nimport * as d3 from \"d3\"\n\nclass CurveTool extends FabricTool {\n  isMouseDown: boolean = false\n  fillColor: string = \"#ffffff00\" //\"#ffffff\"\n  strokeWidth: number = 10\n  strokeColor: string = \"#ffffff\"\n  startCircle: fabric.Circle = new fabric.Circle()\n  curvePath: fabric.Path = new fabric.Path()\n  tempCurvePath: fabric.Path = new fabric.Path()\n  controlPoints: number[][] = []\n  points: number[][] = []\n  tempCurve: fabric.Path = new fabric.Path()\n  finalCurve: fabric.Path = new fabric.Path()\n  _pathString: string = \"M \"\n\n  configureCanvas({\n    strokeWidth,\n    strokeColor,\n    fillColor,\n  }: ConfigureCanvasProps): () => void {\n    this._canvas.isDrawingMode = false\n    this._canvas.selection = false\n    this._canvas.forEachObject((o) => (o.selectable = o.evented = false))\n\n    this.strokeWidth = strokeWidth\n    this.strokeColor = strokeColor\n    this.fillColor = fillColor\n\n    this._canvas.on(\"mouse:down\", (e: any) => this.onMouseDown(e))\n    this._canvas.on(\"mouse:move\", (e: any) => this.onMouseMove(e))\n    this._canvas.on(\"mouse:up\", (e: any) => this.onMouseUp(e))\n    this._canvas.on(\"mouse:out\", (e: any) => this.onMouseOut(e))\n    this._canvas.on(\"mouse:dblclick\", (e: any) => this.onMouseDoubleClick(e))\n\n    return () => {\n      this._canvas.off(\"mouse:down\")\n      this._canvas.off(\"mouse:move\")\n      this._canvas.off(\"mouse:up\")\n      this._canvas.off(\"mouse:out\")\n      //this._canvas.off(\"mouse:dblclick\")\n    }\n  }\n\n  onMouseDown(o: any) {\n    let canvas = this._canvas\n    let _clicked = o.e[\"button\"]\n    let _start = false\n    if (this._pathString === \"M \") {\n      _start = true\n    }\n\n    this.isMouseDown = true\n    var pointer = canvas.getPointer(o.e)\n\n    this.points.push([pointer.x, pointer.y])\n\n    if (_start && _clicked === 0) {\n      // Initialize pathString\n      //this._pathString += `${pointer.x} ${pointer.y} `\n      this.controlPoints.push([pointer.x, pointer.y])\n      this._pathString = this.generateCurvePathData(this.controlPoints)\n      this.startCircle = new fabric.Circle({\n        left: pointer.x,\n        top: pointer.y,\n        originX: \"center\",\n        originY: \"center\",\n        strokeWidth: this.strokeWidth,\n        stroke: this.strokeColor,\n        fill: this.strokeColor,\n        selectable: false,\n        evented: false,\n        radius: this.strokeWidth,\n      })\n      canvas.add(this.startCircle)\n\n      _start = false\n    } else {\n      //canvas.remove(this.finalCurve)\n      if (_clicked === 0) {\n        //if left mouse clicked\n\n        this.controlPoints.push([pointer.x, pointer.y])\n        this._pathString = this.generateCurvePathData(this.controlPoints)\n      }\n    }\n  }\n\n  onMouseMove(o: any) {\n    if (!this.isMouseDown) return //means that if the mouse is not pressed, do nothing; but if it is pressed and moved, then do the commands below\n    let canvas = this._canvas\n    var pointer = canvas.getPointer(o.e)\n    this.points.push([pointer.x, pointer.y])\n    var linePath = this.generateCurvePathData(this.points)\n    canvas.remove(this.tempCurve)\n    this.tempCurve = new fabric.Path(linePath, {\n      strokeWidth: this.strokeWidth,\n      fill: \"\", //this.fillColor,\n      stroke: this.strokeColor,\n      // originX: \"center\",\n      // originY: \"center\",\n      selectable: false,\n      evented: false,\n    })\n    canvas.add(this.tempCurve)\n    //canvas.renderAll()\n    this.points.pop()\n  }\n\n  onMouseUp(o: any) {\n    this.isMouseDown = true\n  }\n\n  onMouseOut(o: any) {\n    this.isMouseDown = false\n  }\n\n  onMouseDoubleClick(o: any) {\n    let canvas = this._canvas\n    canvas.remove(this.startCircle)\n    canvas.remove(this.tempCurve)\n    //canvas.remove(this.finalCurve)\n    this.finalCurve = new fabric.Path(this._pathString, {\n      strokeWidth: this.strokeWidth,\n      fill: \"#ffffff00\", //this.fillColor,\n      stroke: this.strokeColor,\n      originX: \"center\",\n      originY: \"center\",\n      selectable: false,\n      evented: false,\n    })\n\n    if (this.finalCurve.width !== 0 && this.finalCurve.height !== 0) {\n      canvas.add(this.finalCurve)\n      //canvas.renderAll()\n    }\n\n    this._pathString = \"M \"\n    this.controlPoints = []\n    this.points = []\n  }\n\n  private generateCurvePathData(controlPoints: number[][]): string {\n    var lineGenerator = d3.line().curve(d3.curveCatmullRom.alpha(0.5))\n    //@ts-ignore\n    return lineGenerator(controlPoints)\n  }\n}\n\nexport default CurveTool\n","import FabricTool, { ConfigureCanvasProps } from \"./fabrictool\"\n\nclass FreedrawTool extends FabricTool {\n  configureCanvas({\n    strokeWidth,\n    strokeColor,\n  }: ConfigureCanvasProps): () => void {\n    this._canvas.isDrawingMode = true\n    this._canvas.freeDrawingBrush.width = strokeWidth\n    this._canvas.freeDrawingBrush.color = strokeColor\n    return () => {}\n  }\n}\n\nexport default FreedrawTool\n","import { fabric } from \"fabric\";\nimport FabricTool, { ConfigureCanvasProps } from \"./fabrictool\";\n\nclass LineTool extends FabricTool {\n  isMouseDown: boolean = false;\n  strokeWidth: number = 10;\n  strokeColor: string = \"#ffffff\";\n  currentLine: fabric.Line = new fabric.Line();\n\n  configureCanvas({\n    strokeWidth,\n    strokeColor,\n  }: ConfigureCanvasProps): () => void {\n    this._canvas.isDrawingMode = false;\n    this._canvas.selection = false;\n    this._canvas.forEachObject((o) => (o.selectable = o.evented = false));\n\n    this.strokeWidth = strokeWidth;\n    this.strokeColor = strokeColor;\n\n    this._canvas.on(\"mouse:down\", (e: any) => this.onMouseDown(e));\n    this._canvas.on(\"mouse:move\", (e: any) => this.onMouseMove(e));\n    this._canvas.on(\"mouse:up\", (e: any) => this.onMouseUp(e));\n    this._canvas.on(\"mouse:out\", (e: any) => this.onMouseOut(e));\n    return () => {\n      this._canvas.off(\"mouse:down\");\n      this._canvas.off(\"mouse:move\");\n      this._canvas.off(\"mouse:up\");\n      this._canvas.off(\"mouse:out\");\n    };\n  }\n\n  onMouseDown(o: any) {\n    //console.log(\"MouseDown on lineTool selection detected\")\n    let canvas = this._canvas;\n    let _clicked = o.e[\"button\"];\n    this.isMouseDown = true;\n    var pointer = canvas.getPointer(o.e);\n    var points = [pointer.x, pointer.y, pointer.x, pointer.y];\n    this.currentLine = new fabric.Line(points, {\n      strokeWidth: this.strokeWidth,\n      fill: this.strokeColor,\n      stroke: this.strokeColor,\n      originX: \"center\",\n      originY: \"center\",\n      selectable: false,\n      evented: false,\n    });\n    if (_clicked === 0) {\n      canvas.add(this.currentLine);\n    }\n  }\n\n  onMouseMove(o: any) {\n    if (!this.isMouseDown) return;\n    let canvas = this._canvas;\n    var pointer = canvas.getPointer(o.e);\n    this.currentLine.set({ x2: pointer.x, y2: pointer.y }); //takes the first point's coordinates from mouse:down event and then replaces the second coordinate by the new one; that is why the line updates and is dynamic before mouse:down/up again\n    this.currentLine.setCoords();\n    canvas.renderAll();\n  }\n\n  onMouseUp(o: any) {\n    this.isMouseDown = false;\n    let canvas = this._canvas;\n    if (this.currentLine.width === 0 && this.currentLine.height === 0) {\n      canvas.remove(this.currentLine);\n    }\n  }\n\n  onMouseOut(o: any) {\n    this.isMouseDown = false;\n  }\n}\n\nexport default LineTool;\n","import { fabric } from \"fabric\"\nimport FabricTool, { ConfigureCanvasProps } from \"./fabrictool\"\n\nclass PointTool extends FabricTool {\n  isMouseDown: boolean = false\n  fillColor: string = \"#ffffff\"\n  strokeWidth: number = 10\n  strokeColor: string = \"#ffffff\"\n  currentCircle: fabric.Circle = new fabric.Circle()\n  currentStartX: number = 0\n  currentStartY: number = 0\n  displayRadius: number = 1\n\n  configureCanvas({\n    strokeWidth,\n    strokeColor,\n    fillColor,\n    displayRadius\n  }: ConfigureCanvasProps): () => void {\n    this._canvas.isDrawingMode = false\n    this._canvas.selection = false\n    this._canvas.forEachObject((o) => (o.selectable = o.evented = false))\n\n    this.strokeWidth = strokeWidth\n    this.strokeColor = strokeColor\n    this.fillColor = fillColor\n    this.displayRadius = displayRadius\n\n    this._canvas.on(\"mouse:down\", (e: any) => this.onMouseDown(e))\n    this._canvas.on(\"mouse:move\", (e: any) => this.onMouseMove(e))\n    this._canvas.on(\"mouse:up\", (e: any) => this.onMouseUp(e))\n    this._canvas.on(\"mouse:out\", (e: any) => this.onMouseOut(e))\n    return () => {\n      this._canvas.off(\"mouse:down\")\n      this._canvas.off(\"mouse:move\")\n      this._canvas.off(\"mouse:up\")\n      this._canvas.off(\"mouse:out\")\n    }\n  }\n\n  onMouseDown(o: any) {\n    let canvas = this._canvas\n    let _clicked = o.e[\"button\"]\n    this.isMouseDown = true\n    let pointer = canvas.getPointer(o.e)\n    this.currentStartX = pointer.x - (this.displayRadius + this.strokeWidth / 2.)\n    this.currentStartY = pointer.y //- (this._minRadius + this.strokeWidth)\n    this.currentCircle = new fabric.Circle({\n      left: this.currentStartX,\n      top: this.currentStartY,\n      originX: \"left\",\n      originY: \"center\",\n      strokeWidth: this.strokeWidth,\n      stroke: this.strokeColor,\n      fill: this.fillColor,\n      selectable: false,\n      evented: false,\n      radius: this.displayRadius,\n    })\n    if (_clicked === 0) {\n      canvas.add(this.currentCircle)\n    }\n  }\n\n  onMouseMove(o: any) {\n    if (!this.isMouseDown) return\n    let canvas = this._canvas\n    this.currentCircle.setCoords()\n    canvas.renderAll()\n  }\n\n  onMouseUp(o: any) {\n    this.isMouseDown = false\n  }\n\n  onMouseOut(o: any) {\n    this.isMouseDown = false\n  }\n\n}\n\nexport default PointTool\n","import { fabric } from \"fabric\"\nimport FabricTool, { ConfigureCanvasProps } from \"./fabrictool\"\n\nclass PolygonTool extends FabricTool {\n  isMouseDown: boolean = false\n  fillColor: string = \"#ffffff\"\n  strokeWidth: number = 10\n  strokeColor: string = \"#ffffff\"\n  startCircle: fabric.Circle = new fabric.Circle()\n  currentLine: fabric.Line = new fabric.Line()\n  currentPath: fabric.Path = new fabric.Path()\n  _pathString: string = \"M \"\n\n  configureCanvas({\n    strokeWidth,\n    strokeColor,\n    fillColor,\n  }: ConfigureCanvasProps): () => void {\n    this._canvas.isDrawingMode = false\n    this._canvas.selection = false\n    this._canvas.forEachObject((o) => (o.selectable = o.evented = false))\n\n    this.strokeWidth = strokeWidth\n    this.strokeColor = strokeColor\n    this.fillColor = fillColor\n\n    this._canvas.on(\"mouse:down\", (e: any) => this.onMouseDown(e))\n    this._canvas.on(\"mouse:move\", (e: any) => this.onMouseMove(e))\n    this._canvas.on(\"mouse:up\", (e: any) => this.onMouseUp(e))\n    this._canvas.on(\"mouse:out\", (e: any) => this.onMouseOut(e))\n    this._canvas.on(\"mouse:dblclick\", (e: any) => this.onMouseDoubleClick(e))\n    return () => {\n      this._canvas.off(\"mouse:down\")\n      this._canvas.off(\"mouse:move\")\n      this._canvas.off(\"mouse:up\")\n      this._canvas.off(\"mouse:out\")\n      this._canvas.off(\"mouse:dblclick\")\n    }\n  }\n\n  onMouseDown(o: any) {\n    let canvas = this._canvas\n    let _clicked = o.e[\"button\"]\n    let _start = false\n    if (this._pathString === \"M \") {\n      _start = true\n    }\n\n    this.isMouseDown = true\n    var pointer = canvas.getPointer(o.e)\n\n    var points = [pointer.x, pointer.y, pointer.x, pointer.y]\n    canvas.remove(this.currentLine)\n    this.currentLine = new fabric.Line(points, {\n      strokeWidth: this.strokeWidth,\n      fill: this.strokeColor,\n      stroke: this.strokeColor,\n      originX: \"center\",\n      originY: \"center\",\n      selectable: false,\n      evented: false,\n    })\n    if (_clicked === 0) {\n      canvas.add(this.currentLine)\n    }\n\n    if (_start && _clicked === 0) {\n      // Initialize pathString\n      this._pathString += `${pointer.x} ${pointer.y} `\n      this.startCircle = new fabric.Circle({\n        left: pointer.x,\n        top: pointer.y,\n        originX: \"center\",\n        originY: \"center\",\n        strokeWidth: this.strokeWidth,\n        stroke: this.strokeColor,\n        fill: this.strokeColor,\n        selectable: false,\n        evented: false,\n        radius: this.strokeWidth,\n      })\n      canvas.add(this.startCircle)\n\n      _start = false\n    } else {\n      canvas.remove(this.currentPath)\n      if (_clicked === 0) {\n        //if left mouse clicked\n        // Update pathString\n        this._pathString += `L ${pointer.x} ${pointer.y} `\n      }\n      if (_clicked === 2) {\n        //if right mouse clicked, Close pathString\n        this._pathString += \"z\"\n        canvas.remove(this.startCircle)\n      }\n    }\n    this.currentPath = new fabric.Path(this._pathString, {\n      strokeWidth: this.strokeWidth,\n      fill: this.fillColor,\n      stroke: this.strokeColor,\n      originX: \"center\",\n      originY: \"center\",\n      selectable: false,\n      evented: false,\n    })\n    if (this.currentPath.width !== 0 && this.currentPath.height !== 0) {\n      canvas.add(this.currentPath)\n    }\n    if (_clicked === 2) {\n      this._pathString = \"M \"\n    }\n  }\n\n  onMouseMove(o: any) {\n    if (!this.isMouseDown) return\n    let canvas = this._canvas\n    var pointer = canvas.getPointer(o.e)\n    this.currentLine.set({ x2: pointer.x, y2: pointer.y })\n    this.currentLine.setCoords()\n    canvas.renderAll()\n  }\n\n  onMouseUp(o: any) {\n    this.isMouseDown = true\n  }\n\n  onMouseOut(o: any) {\n    this.isMouseDown = false\n  }\n\n  onMouseDoubleClick(o: any) {\n    let canvas = this._canvas\n    // Double click adds two more points at the end, so we have to move back twice more...\n    //AE: It think it is useful for doing undo on the canvas because if we try to use the undo button itself, it keeps drawing lines upto the borders of the canvas which is ugly\n    // for (let i = 0; i < 3; i++) {\n    //   let _last_pt_idx = this._pathString.lastIndexOf(\"L\")\n    //   if (_last_pt_idx === -1) {\n    //     this._pathString = \"M \"\n    //     canvas.remove(this.startCircle)\n    //   } else {\n    //     this._pathString = this._pathString.slice(0, _last_pt_idx)\n    //   }\n    // }\n\n    // canvas.remove(this.currentLine)\n    // canvas.remove(this.currentPath)\n    // this.currentPath = new fabric.Path(this._pathString, {\n    //   strokeWidth: this.strokeWidth,\n    //   fill: this.fillColor,\n    //   stroke: this.strokeColor,\n    //   originX: \"center\",\n    //   originY: \"center\",\n    //   selectable: false,\n    //   evented: false,\n    // })\n    // canvas.add(this.currentPath)\n    this._pathString += \"z\"\n    canvas.remove(this.startCircle)\n    canvas.remove(this.currentPath)\n    this.currentPath = new fabric.Path(this._pathString, {\n      strokeWidth: this.strokeWidth,\n      fill: this.fillColor,\n      stroke: this.strokeColor,\n      originX: \"center\",\n      originY: \"center\",\n      selectable: false,\n      evented: false,\n    })\n    canvas.add(this.currentPath)\n    this._pathString = \"M \"\n    this.isMouseDown = false\n  }\n}\nexport default PolygonTool\n","import { fabric } from \"fabric\"\nimport FabricTool, { ConfigureCanvasProps } from \"./fabrictool\"\n\nclass RectTool extends FabricTool {\n  isMouseDown: boolean = false\n  fillColor: string = \"#ffffff\"\n  strokeWidth: number = 10\n  strokeColor: string = \"#ffffff\"\n  currentRect: fabric.Rect = new fabric.Rect()\n  currentStartX: number = 0\n  currentStartY: number = 0\n  _minLength: number = 10\n\n  configureCanvas({\n    strokeWidth,\n    strokeColor,\n    fillColor,\n  }: ConfigureCanvasProps): () => void {\n    this._canvas.isDrawingMode = false\n    this._canvas.selection = false\n    this._canvas.forEachObject((o) => (o.selectable = o.evented = false))\n\n    this.strokeWidth = strokeWidth\n    this.strokeColor = strokeColor\n    this.fillColor = fillColor\n    this._minLength = strokeWidth\n\n    this._canvas.on(\"mouse:down\", (e: any) => this.onMouseDown(e))\n    this._canvas.on(\"mouse:move\", (e: any) => this.onMouseMove(e))\n    this._canvas.on(\"mouse:up\", (e: any) => this.onMouseUp(e))\n    this._canvas.on(\"mouse:out\", (e: any) => this.onMouseOut(e))\n    return () => {\n      this._canvas.off(\"mouse:down\")\n      this._canvas.off(\"mouse:move\")\n      this._canvas.off(\"mouse:up\")\n      this._canvas.off(\"mouse:out\")\n    }\n  }\n\n  onMouseDown(o: any) {\n    let canvas = this._canvas\n    let _clicked = o.e[\"button\"]\n    this.isMouseDown = true\n    let pointer = canvas.getPointer(o.e)\n    this.currentStartX = pointer.x\n    this.currentStartY = pointer.y\n    this.currentRect = new fabric.Rect({\n      left: this.currentStartX,\n      top: this.currentStartY,\n      originX: \"left\",\n      originY: \"top\",\n      width: this._minLength,\n      height: this._minLength,\n      stroke: this.strokeColor,\n      strokeWidth: this.strokeWidth,\n      fill: this.fillColor,\n      transparentCorners: false,\n      selectable: false,\n      evented: false,\n      strokeUniform: true,\n      noScaleCache: false,\n      angle: 0,\n    })\n    if (_clicked === 0) {\n      canvas.add(this.currentRect)\n    }\n  }\n\n  onMouseMove(o: any) {\n    if (!this.isMouseDown) return\n    let canvas = this._canvas\n    let pointer = canvas.getPointer(o.e)\n    if (this.currentStartX > pointer.x) {\n      this.currentRect.set({ left: Math.abs(pointer.x) })\n    }\n    if (this.currentStartY > pointer.y) {\n      this.currentRect.set({ top: Math.abs(pointer.y) })\n    }\n    let _width = Math.abs(this.currentStartX - pointer.x)\n    let _height = Math.abs(this.currentStartY - pointer.y)\n    this.currentRect.set({\n      width: Math.max(_width, this._minLength * 2),\n      height: Math.max(_height, this._minLength * 2),\n    })\n    this.currentRect.setCoords()\n    canvas.renderAll()\n  }\n\n  onMouseUp(o: any) {\n    this.isMouseDown = false\n  }\n\n  onMouseOut(o: any) {\n    this.isMouseDown = false\n  }\n}\n\nexport default RectTool\n","import { fabric } from \"fabric\";\nimport FabricTool, { ConfigureCanvasProps } from \"./fabrictool\";\n\nclass TextTool extends FabricTool {\n  configureCanvas({}: ConfigureCanvasProps): () => void {\n    this._canvas.isDrawingMode = false;\n    this._canvas.selection = false;\n    this._canvas.forEachObject((o) => (o.selectable = o.evented = false));\n\n    this._canvas.on(\"mouse:down\", (e: any) => this.onMouseDown(e));\n    return () => {\n      this._canvas.off(\"mouse:down\");\n    };\n  }\n\n  onMouseDown(o: any) {\n    let canvas = this._canvas;\n    let _clicked = o.e[\"button\"];\n    var pointer = canvas.getPointer(o.e);\n\n    if (_clicked === 0) {\n      let text = new fabric.IText(\"\", {\n        left: pointer.x,\n        top: pointer.y,\n        fontSize: 25,\n        selectable: true,\n        evented: true,\n      });\n      canvas.add(text);\n      canvas.setActiveObject(text);\n      text.enterEditing();\n      if (text.hiddenTextarea) {\n        text.hiddenTextarea.focus();\n      }\n    }\n  }\n}\n\nexport default TextTool;\n","import FabricTool from \"./fabrictool\"\nimport SingleArrowHeadTool from \"./singlearrowhead\"\nimport DoubleArrowHeadTool from \"./doublearrowhead\"\nimport CircleTool from \"./circle\"\nimport CoordinateTool from \"./coordinate\"\nimport CurveTool from \"./curve\"\nimport FreedrawTool from \"./freedraw\"\nimport LineTool from \"./line\"\nimport PointTool from \"./point\"\nimport PolygonTool from \"./polygon\"\nimport RectTool from \"./rect\"\nimport TextTool from \"./text\"\nimport TransformTool from \"./transform\"\n\n// TODO: Should make TS happy on the Map of selectedTool --> FabricTool\nconst tools: any = {\n  circle: CircleTool,\n  curve: CurveTool,\n  coordinate: CoordinateTool,\n  text: TextTool,\n  freedraw: FreedrawTool,\n  line: LineTool,\n  polygon: PolygonTool,\n  rect: RectTool,\n  singlearrowhead: SingleArrowHeadTool,\n  doublearrowhead: DoubleArrowHeadTool,\n  transform: TransformTool,\n  point: PointTool,\n}\n\nexport { tools, FabricTool }\n","import FabricTool, { ConfigureCanvasProps } from \"./fabrictool\";\n\nclass TransformTool extends FabricTool {\n  configureCanvas(args: ConfigureCanvasProps): () => void {\n    let canvas = this._canvas;\n    canvas.isDrawingMode = false;\n    canvas.selection = true;\n    canvas.forEachObject((o) => (o.selectable = o.evented = true));\n\n    // instead of looking for target of double click,\n    // assume double click on object clears the selected object\n    const handleDoubleClick = () => {\n      const activeObject = canvas.getActiveObject();\n      if (activeObject) {\n        canvas.remove(activeObject);\n      }\n    };\n\n    canvas.on(\"mouse:dblclick\", handleDoubleClick);\n    return () => {\n      canvas.off(\"mouse:dblclick\", handleDoubleClick);\n    };\n  }\n}\n\nexport default TransformTool;\n","//import { downloadCallback, downloadCallback4Json, logCanvasData, save2Storage  } from \"helpers\";\r\nimport { useRef } from \"react\"\r\nimport { fabric } from \"fabric\"\r\n\r\nconst canvasRef = useRef < HTMLCanvasElement > null\r\nconst canvasInstance = (useRef < fabric.Canvas) | (null > null)\r\nconst backgroundCanvasRef = useRef < HTMLCanvasElement > null\r\nconst backgroundCanvasInstance = (useRef < fabric.StaticCanvas) | (null > null)\r\n\r\nconst canvasWidth = 500\r\nconst canvasHeight = 400\r\n\r\nexport const downloadCallback = () => {\r\n  if (canvasInstance.current && backgroundCanvasInstance.current) {\r\n    const tempCanvas = document.createElement(\"canvas\")\r\n    tempCanvas.width = canvasWidth\r\n    tempCanvas.height = canvasHeight\r\n    const tempContext = tempCanvas.getContext(\"2d\")\r\n\r\n    if (tempContext) {\r\n      // Draw background canvas onto temp canvas\r\n      if (backgroundCanvasRef.current) {\r\n        tempContext.drawImage(backgroundCanvasRef.current, 0, 0)\r\n      }\r\n\r\n      if (canvasRef.current) {\r\n        tempContext.drawImage(canvasRef.current, 0, 0)\r\n      }\r\n\r\n      // Export temp canvas as image\r\n      const dataURL = tempCanvas.toDataURL(\"image/png\")\r\n      const link = document.createElement(\"a\")\r\n      link.href = dataURL\r\n      link.download = \"canvas.png\"\r\n      link.click()\r\n    }\r\n  }\r\n}\r\n\r\nexport const downloadCallback4Json = () => {\r\n  if (canvasInstance.current && backgroundCanvasInstance.current) {\r\n    const canvasData = []\r\n\r\n    // Collect background canvas data if needed (assuming backgroundCanvasRef contains objects or path data)\r\n    if (backgroundCanvasRef.current) {\r\n      // Add your logic to extract background drawing data from the background canvas\r\n      // For example, you might use canvasInstance's `toJSON()` or any specific method for extracting the data\r\n      const backgroundData = backgroundCanvasInstance.current.toJSON() // assuming using fabric.js or similar\r\n      canvasData.push({ background: backgroundData })\r\n    }\r\n\r\n    // Collect main canvas data\r\n    if (canvasRef.current) {\r\n      // Assuming canvasInstance is the main drawing canvas, and you want to export its data\r\n      const mainCanvasData = canvasInstance.current.toJSON() // Example if using fabric.js\r\n      canvasData.push({ mainCanvas: mainCanvasData })\r\n    }\r\n\r\n    //// Convert the canvas data to JSON\r\n    const jsonBlob = new Blob([JSON.stringify(canvasData)], {\r\n      type: \"application/json\",\r\n    })\r\n    //// Create a link element to trigger the download\r\n    const link = document.createElement(\"a\")\r\n    link.href = URL.createObjectURL(jsonBlob)\r\n    link.download = \"canvasData.json\"\r\n    link.click()\r\n  }\r\n}\r\n\r\nexport const logCanvasData = () => {\r\n  if (canvasInstance.current && backgroundCanvasInstance.current) {\r\n    const canvasData = []\r\n\r\n    // Collect background canvas data if needed\r\n    if (backgroundCanvasInstance.current) {\r\n      const backgroundData = backgroundCanvasInstance.current.toJSON() // Assuming Fabric.js\r\n      canvasData.push({ background: backgroundData })\r\n    }\r\n\r\n    // Collect main canvas data\r\n    if (canvasInstance.current) {\r\n      const mainCanvasData = canvasInstance.current.toJSON() // Assuming Fabric.js\r\n      canvasData.push({ mainCanvas: mainCanvasData })\r\n    }\r\n\r\n    //// Log the canvas data to the console\r\n    // console.log( \"Combined Canvas Data in DrawableCanvas.tsx:\",         JSON.stringify(canvasData, null, 2)      );\r\n  } else {\r\n    console.error(\"Canvas instances not found.\")\r\n  }\r\n}\r\n\r\n// export const save2Storage = () => {\r\n//   if (canvasInstance.current && backgroundCanvasInstance.current) {\r\n//     //if (canvasInstance.current) {\r\n//     const canvasData = [];\r\n\r\n//     // Collect background canvas data if needed\r\n//     if (backgroundCanvasInstance.current) {\r\n//       const backgroundData = backgroundCanvasInstance.current.toJSON(); // Assuming Fabric.js\r\n//       canvasData.push({ background: backgroundData });\r\n//     }\r\n\r\n//     // Collect main canvas data\r\n//     if (canvasInstance.current) {\r\n//       const mainCanvasData = canvasInstance.current.toJSON(); // Assuming Fabric.js\r\n//       canvasData.push({ mainCanvas: mainCanvasData });\r\n//     }\r\n\r\n//     // Save the canvas data to localStorage\r\n//     try {\r\n//       //localStorage.setItem(\"canvasData\", JSON.stringify(canvasData));\r\n//       setCurrentState(canvasData);\r\n//       console.log(\r\n//         \"Canvas data saved to localStorage and/or currentState in DrawableCanvas.tsx: \",\r\n//         canvasData\r\n//       );\r\n//     } catch (e) {\r\n//       console.error(\"Error saving canvas data to localStorage:\", e);\r\n//     }\r\n//   } else {\r\n//     console.error(\"Canvas instances not found.\");\r\n//   }\r\n// };\r\n\r\nexport const retrieveAndLogImageAsJson = () => {\r\n  // Retrieve the image data URL from localStorage\r\n  const imageDataURL = localStorage.getItem(\"canvasImage-4\") // replace with your image key\r\n\r\n  if (!imageDataURL) {\r\n    console.error(\"Image not found in localStorage\")\r\n    return\r\n  }\r\n\r\n  // Create an Image object\r\n  const image = new Image()\r\n\r\n  // Load the image from the data URL\r\n  image.onload = () => {\r\n    // Create a canvas to draw the image\r\n    const canvas = document.createElement(\"canvas\")\r\n    const ctx = canvas.getContext(\"2d\")\r\n\r\n    if (!ctx) {\r\n      console.error(\"Failed to get 2D context\")\r\n      return\r\n    }\r\n\r\n    // Set canvas size based on the image\r\n    canvas.width = image.width\r\n    canvas.height = image.height\r\n\r\n    // Draw the image on the canvas\r\n    ctx.drawImage(image, 0, 0)\r\n\r\n    // Convert canvas to a data URL (or you could use .toBlob() if needed)\r\n    const jsonImageData = {\r\n      imageDataURL: canvas.toDataURL(\"image/png\"), // This is the Base64-encoded image data\r\n      width: canvas.width,\r\n      height: canvas.height,\r\n    }\r\n\r\n    // Log the JSON object that represents the image\r\n    console.log(\"Image in JSON format:\", JSON.stringify(jsonImageData))\r\n  }\r\n\r\n  // Set the source of the image to the data URL from localStorage\r\n  image.src = imageDataURL\r\n}\r\n","//DrawableCanvas.tsx\n//\"use client\";\nimport React, { useEffect, useRef } from \"react\"\nimport { fabric } from \"fabric\"\nimport CanvasToolbar from \"./CanvasToolbar\"\nimport { useCanvasState } from \"./DrawableCanvasState\"\nimport { tools, FabricTool } from \"./lib\"\nimport {\n  downloadCallback,\n  downloadCallback4Json,\n  logCanvasData,\n} from \"./helpers\"\nimport { customBackground2 } from \"./constants\"\n//import { useCanvasStore } from \"./useCanvasStore\"\n\nexport interface ComponentArgs {\n  index: number\n  fillColor: string\n  strokeWidth: number\n  strokeColor: string\n  backgroundColor: string\n  backgroundImageURL: string\n  canvasWidth: number\n  canvasHeight: number\n  drawingMode: string\n  initialDrawing: Object\n  displayToolbar: boolean\n  displayRadius: number\n  scaleFactors: number[]\n}\n\nconst DrawableCanvas = ({\n  index,\n  fillColor,\n  strokeWidth,\n  strokeColor,\n  backgroundColor,\n  backgroundImageURL,\n  canvasWidth,\n  canvasHeight,\n  drawingMode,\n  initialDrawing,\n  displayToolbar,\n  displayRadius,\n  scaleFactors,\n}: ComponentArgs) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n  const canvasInstance = useRef<fabric.Canvas | null>(null)\n  const backgroundCanvasRef = useRef<HTMLCanvasElement>(null)\n  const backgroundCanvasInstance = useRef<fabric.StaticCanvas | null>(null)\n\n  const save2Storage = () => {\n    if (canvasInstance.current && backgroundCanvasInstance.current) {\n      //if (canvasInstance.current) {\n      const canvasData = []\n\n      // Collect background canvas data if needed\n      if (backgroundCanvasInstance.current) {\n        const backgroundData = backgroundCanvasInstance.current.toJSON() // Assuming Fabric.js\n        canvasData.push({ background: backgroundData })\n      }\n\n      // Collect main canvas data\n      if (canvasInstance.current) {\n        const mainCanvasData = canvasInstance.current.toJSON() // Assuming Fabric.js\n        canvasData.push({ mainCanvas: mainCanvasData })\n      }\n\n      // Save the canvas data to localStorage\n      try {\n        //localStorage.setItem(\"canvasData\", JSON.stringify(canvasData));\n        //setCurrentState(canvasData)\n        console.log(\n          \"Canvas data saved to localStorage and/or currentState in DrawableCanvas.tsx: \",\n          canvasData\n        )\n      } catch (e) {\n        console.error(\"Error saving canvas data to localStorage:\", e)\n      }\n    } else {\n      console.error(\"Canvas instances not found.\")\n    }\n  }\n\n  const {\n    canvasState: {\n      action: { shouldReloadCanvas },\n      currentState,\n      initialState,\n    },\n    saveState,\n    undo,\n    redo,\n    canUndo,\n    canRedo,\n    resetState,\n  } = useCanvasState()\n\n  // const setCurrentState = useCanvasStore(\n  //   (state: { setCurrentState: (state: any) => void }) => state.setCurrentState\n  // )\n\n  useEffect(() => {\n    if (canvasRef.current) {\n      canvasInstance.current = new fabric.Canvas(canvasRef.current, {\n        enableRetinaScaling: false,\n      })\n\n      // Load initial drawing only once\n      canvasInstance.current.loadFromJSON(initialDrawing, () => {\n        canvasInstance.current?.renderAll()\n        resetState(initialDrawing)\n      })\n    }\n\n    if (backgroundCanvasRef.current) {\n      backgroundCanvasInstance.current = new fabric.StaticCanvas(\n        backgroundCanvasRef.current,\n        {\n          enableRetinaScaling: false,\n        }\n      )\n\n      // const rect = customBackground(canvasWidth, canvasHeight);\n      // backgroundCanvasInstance.current.add(rect);\n      // backgroundCanvasInstance.current.renderAll();\n      const group = customBackground2(canvasWidth, canvasHeight, scaleFactors)\n      backgroundCanvasInstance.current.add(group)\n      backgroundCanvasInstance.current.renderAll()\n    }\n\n    // Disable context menu on right-click\n    const canvasElement = canvasRef.current\n    if (canvasElement) {\n      canvasElement.addEventListener(\"contextmenu\", (e) => {\n        e.preventDefault()\n      })\n    }\n\n    return () => {\n      if (canvasElement) {\n        canvasElement.removeEventListener(\"contextmenu\", (e) => {\n          e.preventDefault()\n        })\n      }\n      canvasInstance.current?.dispose()\n      backgroundCanvasInstance.current?.dispose()\n    }\n  }, [resetState])\n\n  useEffect(() => {\n    if (backgroundCanvasInstance.current && backgroundImageURL) {\n      const bgImage = new Image()\n      bgImage.onload = function () {\n        backgroundCanvasInstance.current?.getContext().drawImage(bgImage, 0, 0)\n      }\n      bgImage.src = backgroundImageURL\n    }\n  }, [backgroundImageURL])\n\n  useEffect(() => {\n    if (canvasInstance.current && shouldReloadCanvas) {\n      canvasInstance.current.loadFromJSON(currentState, () => {\n        canvasInstance.current?.renderAll()\n      })\n    }\n  }, [shouldReloadCanvas, currentState])\n\n  useEffect(() => {\n    if (canvasInstance.current) {\n      const selectedTool = new tools[drawingMode](\n        canvasInstance.current\n      ) as FabricTool\n      const cleanupToolEvents = selectedTool.configureCanvas({\n        fillColor: fillColor,\n        strokeWidth: strokeWidth,\n        strokeColor: strokeColor,\n        displayRadius: displayRadius,\n        scaleFactors: scaleFactors,\n        canvasHeight: canvasHeight,\n        canvasWidth: canvasWidth,\n      })\n\n      const handleMouseUp = () => {\n        const canvasJSON = canvasInstance.current?.toJSON()\n        if (canvasJSON) {\n          saveState(canvasJSON)\n        }\n      }\n\n      canvasInstance.current.on(\"mouse:up\", handleMouseUp)\n      canvasInstance.current.on(\"mouse:dblclick\", handleMouseUp)\n\n      return () => {\n        cleanupToolEvents()\n        canvasInstance.current?.off(\"mouse:up\", handleMouseUp)\n        canvasInstance.current?.off(\"mouse:dblclick\", handleMouseUp)\n      }\n    }\n  }, [\n    strokeWidth,\n    strokeColor,\n    displayRadius,\n    fillColor,\n    drawingMode,\n    scaleFactors,\n    canvasHeight,\n    canvasWidth,\n    saveState,\n  ])\n\n  // Save the current drawing to localStorage whenever the canvas state changes\n  useEffect(() => {\n    if (canvasInstance.current) {\n      const saveToLocalStorage = () => {\n        const canvasData = canvasInstance.current\n          ? canvasInstance.current.toJSON()\n          : null\n        if (canvasData) {\n          localStorage.setItem(\n            `canvasDrawing-${index}`,\n            JSON.stringify(canvasData)\n          )\n          console.log(\n            `Canvas data saved to localStorage for index ${index}, in DrawableCanvas.tsx using useEffect:`,\n            canvasData\n          )\n        }\n      }\n\n      canvasInstance.current.on(\"object:added\", saveToLocalStorage)\n\n      return () => {\n        canvasInstance.current?.off(\"object:added\", saveToLocalStorage)\n      }\n    }\n  }, [canvasInstance.current, index]) // Monitor the index for changes\n\n  //// Load the drawing from localStorage when the component mounts\n  useEffect(() => {\n    if (canvasInstance.current) {\n      const savedDrawing = localStorage.getItem(`canvasDrawing-${index}`)\n      if (savedDrawing) {\n        const parsedDrawing = JSON.parse(savedDrawing)\n        if (canvasRef.current) {\n          // Ensure the canvas is properly loaded from localStorage.\n          canvasInstance.current?.loadFromJSON(parsedDrawing, () => {\n            canvasInstance.current?.renderAll()\n          })\n          console.log(\n            `Canvas data loaded from localStorage for index ${index}:`,\n            savedDrawing\n          )\n        }\n      }\n    }\n  }, [canvasInstance.current, index]) // Load the drawing whenever the `index` and canvasInstance.current changes\n\n  return (\n    <div style={{ position: \"relative\" }}>\n      <div\n        style={{\n          position: \"absolute\",\n          top: 0,\n          left: 0,\n          zIndex: 0,\n          backgroundColor: \"rgba(248, 243, 243, 0.1)\", //\"rgba(255, 0, 0, 0.1)\",\n        }}\n      >\n        <canvas\n          id={`backgroundimage-canvas-${index}`}\n          ref={backgroundCanvasRef}\n          width={canvasWidth}\n          height={canvasHeight}\n        />\n      </div>\n      <div\n        style={{\n          position: \"absolute\",\n          top: 0,\n          left: 0,\n          zIndex: 10,\n          border: \"1px solid black\",\n        }}\n      >\n        <canvas\n          id={`canvas-${index}`}\n          ref={canvasRef}\n          width={canvasWidth}\n          height={canvasHeight}\n          className=\"border border-lightgrey\"\n        />\n      </div>\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"row\",\n        }}\n      >\n        {displayToolbar && (\n          <CanvasToolbar\n            topPosition={0}\n            leftPosition={canvasWidth + 5}\n            downloadCallback={downloadCallback}\n            downloadCallback2={downloadCallback4Json}\n            //downloadCallback3={logCanvasData}\n            saveCallback={save2Storage}\n            canUndo={canUndo}\n            canRedo={canRedo}\n            undoCallback={undo}\n            redoCallback={redo}\n            resetCallback={() => {\n              //resetState(initialState);\n              const userConfirmed = window.confirm(\n                \"Are you sure you want to clear the canvas? This action cannot be undone.\"\n              )\n              if (userConfirmed) {\n                resetState(initialState)\n                //console.log(\"Canvas has been reset.\");\n              } else {\n                //console.log(\"Canvas reset canceled.\");\n              }\n            }}\n          />\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default DrawableCanvas\n","import { fabric } from \"fabric\";\r\n\r\nexport function customBackground(canvasWidth: any, canvasHeight: any) {\r\n  return new fabric.Rect({\r\n    left: 75,\r\n    top: 25,\r\n    fill: \"white\",\r\n    width: canvasWidth - 100,\r\n    height: canvasHeight - 100,\r\n    stroke: \"black\",\r\n    strokeWidth: 1,\r\n    selectable: false,\r\n    evented: false,\r\n    lockMovementX: true,\r\n    lockMovementY: true,\r\n    lockRotation: true,\r\n    lockScalingX: true,\r\n    lockScalingY: true,\r\n    hasControls: false,\r\n  });\r\n}\r\n\r\n// // other drawing:\r\nexport function customBackground2(\r\n  canvasWidth: any,\r\n  canvasHeight: any,\r\n  scaleFactors: any\r\n) {\r\n  const objects = [];\r\n  const rect = new fabric.Rect({\r\n    //scaleFactors = [xlim, ylim, bottom_margin, left_margin, top_margin, right_margin]\r\n    left: scaleFactors[3], //0.12 * canvasWidth, // Adjusted from 0.1 to 0.12\r\n    top: scaleFactors[4], //0.05 * canvasHeight\r\n    fill: \"transparent\",\r\n    stroke: \"black\",\r\n    width: canvasWidth - scaleFactors[3] - scaleFactors[5], //0.83 * canvasWidth, // Adjusted width to maintain the same right edge\r\n    height: canvasHeight - scaleFactors[2] - scaleFactors[4], // 0.8 * canvasHeight,\r\n    selectable: false,\r\n    evented: false,\r\n    hasControls: false,\r\n    lockMovementX: true,\r\n    lockMovementY: true,\r\n    lockRotation: true,\r\n  });\r\n  objects.push(rect);\r\n\r\n  const rectLeft = scaleFactors[3];\r\n  const rectTop = scaleFactors[4];\r\n  const rectWidth = canvasWidth - scaleFactors[3] - scaleFactors[5]; // Adjusted width to maintain the same right edge\r\n  const rectHeight = canvasHeight - scaleFactors[2] - scaleFactors[4];\r\n\r\n  // Add tick marks, numbers, and lines to the left side\r\n  for (let i = 0; i <= 10; i++) {\r\n    const y = rectTop + (i * rectHeight) / 10;\r\n    const tick = new fabric.Line([rectLeft - 5, y, rectLeft, y], {\r\n      stroke: \"black\",\r\n      selectable: false,\r\n      evented: false,\r\n      hasControls: false,\r\n      lockMovementX: true,\r\n      lockMovementY: true,\r\n      lockRotation: true,\r\n    });\r\n    const text = new fabric.Text(\r\n      (scaleFactors[1] - (i * scaleFactors[1]) / 10).toString(),\r\n      {\r\n        left: rectLeft - 35,\r\n        top: y - 10,\r\n        fontSize: 20,\r\n        fill: \"black\",\r\n        selectable: false,\r\n        evented: false,\r\n        hasControls: false,\r\n        lockMovementX: true,\r\n        lockMovementY: true,\r\n        lockRotation: true,\r\n      }\r\n    );\r\n    const hLine = new fabric.Line([rectLeft, y, rectLeft + rectWidth, y], {\r\n      stroke: \"lightgray\",\r\n      selectable: false,\r\n      evented: false,\r\n      hasControls: false,\r\n      lockMovementX: true,\r\n      lockMovementY: true,\r\n      lockRotation: true,\r\n    });\r\n    objects.push(tick, text, hLine);\r\n  }\r\n\r\n  // Add tick marks, numbers, and lines to the bottom side\r\n  for (let i = 0; i <= 10; i++) {\r\n    const x = rectLeft + (i * rectWidth) / 10;\r\n    const tick = new fabric.Line(\r\n      [x, rectTop + rectHeight, x, rectTop + rectHeight + 5],\r\n      {\r\n        stroke: \"black\",\r\n        selectable: false,\r\n        evented: false,\r\n        hasControls: false,\r\n        lockMovementX: true,\r\n        lockMovementY: true,\r\n        lockRotation: true,\r\n      }\r\n    );\r\n    const text = new fabric.Text(((i * scaleFactors[0]) / 10).toString(), {\r\n      left: x - 7,\r\n      top: rectTop + rectHeight + 10,\r\n      fontSize: 20,\r\n      fill: \"black\",\r\n      selectable: false,\r\n      evented: false,\r\n      hasControls: false,\r\n    });\r\n    const vLine = new fabric.Line([x, rectTop, x, rectTop + rectHeight], {\r\n      stroke: \"lightgray\",\r\n      selectable: false,\r\n      evented: false,\r\n      hasControls: false,\r\n      lockMovementX: true,\r\n      lockMovementY: true,\r\n      lockRotation: true,\r\n    });\r\n    objects.push(tick, text, vLine);\r\n  }\r\n\r\n  //// Add x-axis title\r\n  //   const xAxisTitle = new fabric.Text(\"Quantity, Q\", {\r\n  //     left: rectLeft + rectWidth / 2,\r\n  //     top: rectTop + rectHeight + 40,\r\n  //     fontSize: 24,\r\n  //     fontStyle: \"italic\", // Set text to italics\r\n  //     fill: \"black\",\r\n  //     originX: \"center\",\r\n  //     selectable: false,\r\n  //     evented: false,\r\n  //     hasControls: false,\r\n  //     lockMovementX: true,\r\n  //     lockMovementY: true,\r\n  //     lockRotation: true,\r\n  //   });\r\n  //   objects.push(xAxisTitle);\r\n\r\n  //// Add y-axis title\r\n  //   const yAxisTitle = new fabric.Text(\"Price, P\", {\r\n  //     left: rectLeft - 65, // Adjusted for more space\r\n  //     top: rectTop + rectHeight / 2,\r\n  //     fontSize: 24,\r\n  //     fontStyle: \"italic\", // Set text to italics\r\n  //     fill: \"black\",\r\n  //     originX: \"center\",\r\n  //     originY: \"center\",\r\n  //     angle: -90,\r\n  //     selectable: false,\r\n  //     evented: false,\r\n  //     hasControls: false,\r\n  //     lockMovementX: true,\r\n  //     lockMovementY: true,\r\n  //     lockRotation: true,\r\n  //   });\r\n  // objects.push(yAxisTitle);\r\n  //// Move the first element (rect) to the last position (when rectangle is drawn first, it is overlapped by others)\r\n  const firstElement = objects.shift();\r\n  objects.push(firstElement);\r\n\r\n  // Change the color of the rectangle\r\n  if (firstElement instanceof fabric.Rect) {\r\n    firstElement.set({ fill: \"\" }); // Change 'blue' to any color you want\r\n  }\r\n\r\n  const filteredObjects = objects.filter(\r\n    (obj): obj is fabric.Object => obj !== undefined\r\n  );\r\n\r\n  const group = new fabric.Group(filteredObjects, {\r\n    selectable: false,\r\n    evented: false,\r\n    hasControls: false,\r\n    lockMovementX: true,\r\n    lockMovementY: true,\r\n    lockRotation: true,\r\n  });\r\n\r\n  return group;\r\n\r\n  //   canvas.add(group);\r\n  //   canvas.renderAll();\r\n}\r\n","// DrawingModeSelector.tsx\r\nimport React from \"react\"\r\nimport {\r\n  // Scale3d,\r\n  Slash,\r\n  Dot,\r\n  Hexagon,\r\n  RectangleHorizontal,\r\n  Circle,\r\n  Pencil,\r\n  Spline,\r\n  MoveUpRight,\r\n  MoveDiagonal,\r\n  Type,\r\n  MousePointer2,\r\n} from \"lucide-react\"\r\n\r\ninterface DrawingModeSelectorProps {\r\n  drawingMode: string\r\n  setDrawingMode: (mode: string) => void\r\n}\r\n\r\nconst DrawingModeSelector: React.FC<DrawingModeSelectorProps> = ({\r\n  drawingMode,\r\n  setDrawingMode,\r\n}) => {\r\n  const modes = [\r\n    {\r\n      mode: \"line\",\r\n      icon: Slash, //process.env.PUBLIC_URL + \"/undo.png\",\r\n      description: \"Draw a line\",\r\n    },\r\n    {\r\n      mode: \"singlearrowhead\",\r\n      icon: MoveUpRight,\r\n      description: \"Draw a single arrowhead\",\r\n    },\r\n    {\r\n      mode: \"doublearrowhead\",\r\n      icon: MoveDiagonal,\r\n      description: \"Draw a double arrowhead\",\r\n    },\r\n    { mode: \"point\", icon: Dot, description: \"Draw a point\" },\r\n    { mode: \"polygon\", icon: Hexagon, description: \"Draw a polygon\" },\r\n    // {\r\n    //   mode: \"rect\",\r\n    //   icon: RectangleHorizontal,\r\n    //   description: \"Draw a rectangle\",\r\n    // },\r\n    //{ mode: \"circle\", icon: Circle, description: \"Draw a circle\" },\r\n    //{ mode: \"freedraw\", icon: Pencil, description: \"Free draw\" },\r\n    {\r\n      mode: \"coordinate\",\r\n      icon: process.env.PUBLIC_URL + \"/coordicon.svg\",\r\n      description: \"Draw coordinates\",\r\n    },\r\n    { mode: \"curve\", icon: Spline, description: \"Draw a curve\" },\r\n\r\n    { mode: \"text\", icon: Type, description: \"Add text\" },\r\n    // {\r\n    //   mode: \"transform\",\r\n    //   icon: MousePointer2,\r\n    //   description: \"Select & move shapes\",\r\n    // },\r\n  ]\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ display: \"flex\", gap: \"1px\", flexWrap: \"wrap\" }}>\r\n        {modes.map(({ mode, icon: Icon, description }) => (\r\n          <button\r\n            key={mode}\r\n            type=\"button\"\r\n            onClick={() => setDrawingMode(mode)}\r\n            title={description}\r\n            style={{\r\n              backgroundColor:\r\n                drawingMode === mode ? \"rgb(187, 182, 182)\" : \"white\",\r\n              border: \"0px solid black\",\r\n              margin: \"0px\",\r\n              padding: \"5px\",\r\n              cursor: \"pointer\",\r\n              width: \"30px\",\r\n              height: \"30px\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              borderRadius: \"20%\",\r\n            }}\r\n          >\r\n            {typeof Icon === \"string\" ? (\r\n              <img\r\n                src={Icon}\r\n                alt={mode}\r\n                style={{ width: \"24px\", height: \"24px\" }}\r\n              />\r\n            ) : (\r\n              <Icon style={{ width: \"24px\", height: \"24px\" }} />\r\n            )}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DrawingModeSelector\r\n","//DrawingApp.tsx\r\n\"use client\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport DrawableCanvas, { ComponentArgs } from \"./DrawableCanvas\";\r\nimport DrawingModeSelector from \"./DrawingModeSelector\";\r\nimport { CanvasStateProvider } from \"./DrawableCanvasState\";\r\n\r\ninterface DrawingAppProps {\r\n  index: number;\r\n}\r\n\r\nfunction DrawingApp({ index }: DrawingAppProps) {\r\n  //index is still prop because unlike the other props form previous components, it is not defined yet\r\n  const [drawingMode, setDrawingMode] = useState(\"point\");\r\n  const [strokeColor, setStrokeColor] = useState(\"#000000\");\r\n  const [strokeWidth, setStrokeWidth] = useState(2);\r\n\r\n  const canvasWidth = 500;\r\n  const canvasHeight = 400;\r\n  const xlim = 100; // absolute in pixels\r\n  const ylim = 100; // absolute in pixels\r\n  const bottom_margin = 75; // absolute in pixels\r\n  const left_margin = 84;\r\n  const top_margin = 25;\r\n  const right_margin = 35;\r\n  const scaleFactors = [\r\n    xlim,\r\n    ylim,\r\n    bottom_margin,\r\n    left_margin,\r\n    top_margin,\r\n    right_margin,\r\n  ];\r\n\r\n  const canvasProps: ComponentArgs = {\r\n    index: index,\r\n    fillColor: \"transparent\", //strokeColor, //\r\n    strokeWidth: strokeWidth,\r\n    strokeColor: strokeColor,\r\n    backgroundColor: \"blue\",\r\n    backgroundImageURL: \"\",\r\n    canvasWidth: canvasWidth,\r\n    canvasHeight: canvasHeight,\r\n    drawingMode: drawingMode,\r\n    initialDrawing: [{}],\r\n    displayToolbar: true,\r\n    displayRadius: 3,\r\n    scaleFactors: scaleFactors,\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <CanvasStateProvider>\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              marginBottom: \"10px\",\r\n            }}\r\n          >\r\n            <DrawingModeSelector\r\n              drawingMode={drawingMode}\r\n              setDrawingMode={setDrawingMode}\r\n            />\r\n            <div style={{ marginLeft: \"10px\" }}>\r\n              <label htmlFor=\"strokeColor\">Stroke Color: </label>\r\n              <input\r\n                type=\"color\"\r\n                id=\"strokeColor\"\r\n                value={strokeColor}\r\n                onChange={(e) => setStrokeColor(e.target.value)}\r\n              />\r\n            </div>\r\n            <div style={{ marginLeft: \"10px\" }}>\r\n              <label htmlFor=\"strokeWidth\">Stroke Width: </label>\r\n              <input\r\n                type=\"range\"\r\n                id=\"strokeWidth\"\r\n                value={strokeWidth}\r\n                min=\"1\"\r\n                max=\"5\"\r\n                onChange={(e) => setStrokeWidth(Number(e.target.value))}\r\n                style={{ width: \"75px\" }} // Set the width of the slider\r\n              />\r\n              <span>{strokeWidth}</span>\r\n            </div>\r\n          </div>\r\n          <DrawableCanvas {...canvasProps} />\r\n        </CanvasStateProvider>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default DrawingApp;\r\n","import React, { useState, useEffect } from \"react\"\r\nimport DrawingApp from \"./canvas/DrawingApp\"\r\n//import { handleJsonSave, handleGeneratePDF } from \"./utils\";\r\nimport { handleGeneratePDF } from \"./utils\"\r\n//import { fabric } from \"fabric\";\r\n//import { useCanvasStore } from \"./canvas/useCanvasStore\"\r\n\r\ninterface QuizProps {\r\n  questions: {\r\n    qtype: string\r\n    question: string\r\n    options?: string[] //answers: string[];\r\n    Ref: string\r\n  }[]\r\n  userId: string | undefined\r\n  quizName: string\r\n}\r\n\r\nconst QuestionsComponent = ({ questions, userId, quizName }: QuizProps) => {\r\n  //const [userAnswers, setUserAnswers] = useState<{    [key: number]: string | number;   }>({});\r\n  const [userAnswers, setUserAnswers] = useState<{\r\n    [key: number]: string | number\r\n  }>({})\r\n  useEffect(() => {\r\n    const storedAnswers = localStorage.getItem(\"userAnswers\")\r\n    if (storedAnswers) {\r\n      setUserAnswers(JSON.parse(storedAnswers))\r\n    }\r\n  }, [])\r\n  console.log(\"userAnswers\", userAnswers)\r\n  const [fullname, setFullname] = useState(\"\")\r\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0)\r\n  console.log(\"currentQuestionIndex\", currentQuestionIndex)\r\n  const [showResults, setShowResults] = useState(false)\r\n\r\n  //const currentState = useCanvasStore((state: any) => state.currentState) // get it from store\r\n\r\n  const saveCanvasImage2storage = async (index: number) => {\r\n    const mainCanvasId = `canvas-${index}`\r\n    const backgroundCanvasId = `backgroundimage-canvas-${index}`\r\n\r\n    const mainCanvas = document.getElementById(\r\n      mainCanvasId\r\n    ) as HTMLCanvasElement\r\n    const backgroundCanvas = document.getElementById(\r\n      backgroundCanvasId\r\n    ) as HTMLCanvasElement\r\n\r\n    if (!mainCanvas || !backgroundCanvas) {\r\n      //if (!mainCanvas) {\r\n      console.error(\"Canvas elements not found\")\r\n      return null\r\n    }\r\n\r\n    const tempCanvas = document.createElement(\"canvas\")\r\n    tempCanvas.width = mainCanvas.width\r\n    tempCanvas.height = mainCanvas.height\r\n    const tempCtx = tempCanvas.getContext(\"2d\")\r\n\r\n    if (!tempCtx) {\r\n      console.error(\"Failed to get 2D context\")\r\n      return null\r\n    }\r\n\r\n    tempCtx.drawImage(\r\n      backgroundCanvas,\r\n      0,\r\n      0,\r\n      tempCanvas.width,\r\n      tempCanvas.height\r\n    )\r\n    tempCtx.drawImage(mainCanvas, 0, 0, tempCanvas.width, tempCanvas.height)\r\n\r\n    const dataURL = tempCanvas.toDataURL(\"image/png\")\r\n    localStorage.setItem(`canvasImage-${index}`, dataURL)\r\n  }\r\n\r\n  const handleInputChange = (questionId: any, value: any) => {\r\n    setUserAnswers((prev) => ({\r\n      ...prev,\r\n      [questionId]: value, // Store the answer for the specific questionId\r\n    }))\r\n  }\r\n\r\n  const handleNext = async () => {\r\n    //console.log(\"currentState of canvas located in Qcomp.tsx : \", currentState) // this a state define here but fetched from store\r\n    localStorage.setItem(\"userAnswers\", JSON.stringify(userAnswers))\r\n\r\n    if (questions[currentQuestionIndex].qtype === \"graphing-quest\") {\r\n      await saveCanvasImage2storage(currentQuestionIndex) //calling the function here\r\n    }\r\n\r\n    //if (showResults) return; // Prevent further updates after showing results ()\r\n    if (currentQuestionIndex !== questions.length - 1) {\r\n      setCurrentQuestionIndex(currentQuestionIndex + 1)\r\n    } else {\r\n      setShowResults(true)\r\n\r\n      // const apiRoute = quizName ? `/api/${quizName}Results` : null\r\n\r\n      // if (!apiRoute) {\r\n      //   throw new Error(\"Quiz name is required to determine the API route.\")\r\n      // }\r\n\r\n      // fetch(apiRoute, {\r\n      //   method: \"POST\",\r\n      //   headers: {\r\n      //     \"Content-Type\": \"application/json\",\r\n      //   },\r\n      //   body: JSON.stringify({\r\n      //     userId: userId,\r\n      //     userAnswers: userAnswers,\r\n      //     quizName: quizName,\r\n      //   }),\r\n      // })\r\n      //   .then((response) => {\r\n      //     if (!response.ok) {\r\n      //       throw new Error(\"Network response was not working.\")\r\n      //     }\r\n      //     return response.json()\r\n      //   })\r\n      //   .then((data) => {\r\n      //     console.log(\"Quiz results saved successfully:\", data)\r\n      //   })\r\n      //   .catch((error) => {\r\n      //     console.error(\"Error saving quiz results:\", error)\r\n      //   })\r\n    }\r\n  }\r\n\r\n  const handleBack = () => {\r\n    if (currentQuestionIndex > 0) {\r\n      setCurrentQuestionIndex(currentQuestionIndex - 1)\r\n    }\r\n  }\r\n\r\n  const startquiz = () => {\r\n    setCurrentQuestionIndex(1)\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-[100px]\">\r\n      <div className=\"max-w-[1500px] mx-auto w-[90%] flex justify-center py-10 flex-col\">\r\n        <form\r\n        // onSubmit={(e) => handleJsonSave(e, questions, userAnswers)}\r\n        // style={{ flex: \"1\" }}\r\n        >\r\n          {/* Render the question section or results based on `showResults` */}\r\n          {!showResults ? (\r\n            <>\r\n              <div style={{ marginBottom: \"30px\" }}>\r\n                <label>\r\n                  Full Name:\r\n                  <input\r\n                    type=\"text\"\r\n                    value={fullname}\r\n                    onChange={(e) => setFullname(e.target.value)}\r\n                    style={{\r\n                      marginLeft: \"10px\",\r\n                      width: \"400px\",\r\n                      height: \"40px\",\r\n                    }}\r\n                  />\r\n                </label>\r\n              </div>\r\n              <div\r\n                style={{\r\n                  textAlign: \"right\",\r\n                  padding: \"20px\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"space-between\",\r\n                }}\r\n              >\r\n                <h3 style={{ margin: 0 }}>\r\n                  Question: {currentQuestionIndex + 1}\r\n                  <span>/{questions.length}</span>\r\n                </h3>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={(e) =>\r\n                    handleGeneratePDF(e, questions, userAnswers, fullname)\r\n                  }\r\n                >\r\n                  {currentQuestionIndex === questions.length - 1\r\n                    ? \"Download PDF File\"\r\n                    : \"Download PDF File\"}\r\n                </button>\r\n              </div>\r\n              {/* Displaying only the current question */}\r\n              <div style={{ marginBottom: \"20px\" }}>\r\n                <div style={{ marginBottom: \"20px\" }}>\r\n                  {questions &&\r\n                    questions.length > 0 &&\r\n                    currentQuestionIndex >= 0 &&\r\n                    currentQuestionIndex < questions.length && (\r\n                      <label>\r\n                        {currentQuestionIndex + 1}.{\" \"}\r\n                        {questions[currentQuestionIndex].question}\r\n                      </label>\r\n                    )}\r\n                </div>\r\n                {/* Render question types based on the `qtype` */}\r\n                {questions[currentQuestionIndex].qtype === \"mc-quest\" && (\r\n                  <div>\r\n                    {questions[currentQuestionIndex].options?.map(\r\n                      (option, i) => (\r\n                        <div key={i}>\r\n                          <input\r\n                            type=\"radio\"\r\n                            name={`question-${currentQuestionIndex}`}\r\n                            value={option}\r\n                            checked={\r\n                              userAnswers[currentQuestionIndex] === option\r\n                            }\r\n                            onChange={() =>\r\n                              handleInputChange(currentQuestionIndex, option)\r\n                            }\r\n                          />\r\n                          {option}\r\n                        </div>\r\n                      )\r\n                    )}\r\n                  </div>\r\n                )}\r\n                {questions[currentQuestionIndex].qtype ===\r\n                  \"float-num-quest\" && (\r\n                  <div style={{ marginTop: \"10px\" }}>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={userAnswers[currentQuestionIndex] || \"\"}\r\n                      style={{ height: \"35px\", fontSize: \"16px\" }}\r\n                      onChange={(e) =>\r\n                        handleInputChange(currentQuestionIndex, e.target.value)\r\n                      }\r\n                    />\r\n                  </div>\r\n                )}\r\n                {questions[currentQuestionIndex].qtype ===\r\n                  \"one-line-text-quest\" && (\r\n                  <div style={{ marginTop: \"10px\" }}>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={userAnswers[currentQuestionIndex] || \"\"}\r\n                      maxLength={150}\r\n                      style={{\r\n                        width: \"90%\",\r\n                        height: \"35px\",\r\n                        fontSize: \"20px\",\r\n                      }}\r\n                      onChange={(e) =>\r\n                        handleInputChange(currentQuestionIndex, e.target.value)\r\n                      }\r\n                    />\r\n                  </div>\r\n                )}\r\n                {questions[currentQuestionIndex].qtype ===\r\n                  \"manylines-text-quest\" && (\r\n                  <div style={{ marginTop: \"10px\" }}>\r\n                    <textarea\r\n                      value={userAnswers[currentQuestionIndex] || \"\"}\r\n                      maxLength={1000}\r\n                      style={{\r\n                        width: \"96%\",\r\n                        height: \"100px\",\r\n                        fontSize: \"20px\",\r\n                      }}\r\n                      onChange={(e) =>\r\n                        handleInputChange(currentQuestionIndex, e.target.value)\r\n                      }\r\n                    />\r\n                  </div>\r\n                )}\r\n                {questions[currentQuestionIndex].qtype === \"graphing-quest\" && (\r\n                  <div\r\n                    style={{\r\n                      marginTop: \"50px\",\r\n                      marginLeft: \"50px\",\r\n                      marginBottom: \"500px\",\r\n                    }}\r\n                  >\r\n                    <DrawingApp index={currentQuestionIndex} />\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Navigation buttons */}\r\n              {/* <div>\r\n                <h1>Current Canvas State:</h1>\r\n                <pre>{JSON.stringify(currentState, null, 2)}</pre>\r\n                <button onClick={handleJsonClick}>Save Current State</button>\r\n              </div> */}\r\n\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  justifyContent: \"space-between\",\r\n                  marginTop: \"20px\",\r\n                }}\r\n              >\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleBack}\r\n                  disabled={currentQuestionIndex === 0}\r\n                >\r\n                  {currentQuestionIndex === 0 ? \"\" : \"← Previous Question\"}\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleNext}\r\n                  style={{ marginRight: \"200px\" }} // Add margin to the left of the Next button\r\n                >\r\n                  {currentQuestionIndex === questions.length - 1\r\n                    ? \"Finish Quiz\"\r\n                    : \"Next Question →\"}\r\n                </button>\r\n\r\n                {/* <div style={{ textAlign: \"right\", padding: \"20px\" }}>\r\n                  <button\r\n                    type=\"button\"\r\n                    //disabled={currentQuestionIndex != questions.length - 1}\r\n                    onClick={(e) =>\r\n                      handleGeneratePDF(e, questions, userAnswers, fullname)\r\n                    }\r\n                  >\r\n                    {currentQuestionIndex === questions.length - 1\r\n                      ? \"Download PDF File\"\r\n                      : \"Download PDF File\"}\r\n                  </button>\r\n                </div> */}\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <div className=\"text-center\">\r\n              {/* Results section */}\r\n              <div style={{ marginTop: \"20px\" }}>\r\n                <h3> You have successfully completed {quizName} ...! 📈</h3>\r\n\r\n                {/* <button\r\n                  type=\"submit\"\r\n                  className=\"p-1 rounded-md bg-primary text-white text-center text-1xl\"\r\n                >\r\n                  Download Json File\r\n                </button> */}\r\n              </div>\r\n              <div style={{ marginTop: \"20px\" }}>\r\n                <button\r\n                  onClick={() => window.location.reload()}\r\n                  // className=\"p-1 rounded-md bg-dark text-white text-center text-1xl mt-10\"\r\n                >\r\n                  Restart Assessement →\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default QuestionsComponent\r\n","//type of questions: \"mc-quest\", \"float-num-quest\" , \"one-line-text-quest\", \"manylines-text-quest\", \"graphing-quest\"\r\n\r\n// import { saveAs } from \"file-saver\"\r\n// import html2pdf from \"html2pdf.js\"\r\n\r\nexport const handleGeneratePDF = async (\r\n  e,\r\n  questions,\r\n  userAnswers,\r\n  fullname\r\n) => {\r\n  e.preventDefault()\r\n\r\n  const userInputData = questions.map((question, index) => ({\r\n    ...question,\r\n    \"user-answer\": userAnswers[index] || \"\",\r\n  }))\r\n\r\n  let htmlContent = `\r\n    <html>\r\n      <head>\r\n        <style>\r\n          body { font-family: Arial, sans-serif; }\r\n          .question { margin-bottom: 20px; }\r\n          .answer { margin-top: 10px; white-space: pre-wrap; }\r\n          .manylines-text-quest { height: 200px; overflow: hidden; }\r\n          .graphing-quest { margin-top: 10px; }\r\n          .graphing-quest img { width: 150px; height: 150px; } /* Adjust the size of the embedded graph */\r\n        </style>\r\n      </head>\r\n      <body>\r\n        <h1>Full Name: ${fullname}</h1>\r\n  `\r\n\r\n  userInputData.forEach((question, index) => {\r\n    htmlContent += `\r\n      <div class=\"question\">\r\n        <p>${index + 1}. ${question.question}</p>\r\n    `\r\n\r\n    if (question.qtype === \"mc-quest\") {\r\n      question.options.forEach((option) => {\r\n        htmlContent += `<p>${option}</p>`\r\n      })\r\n    }\r\n\r\n    if (question.qtype === \"manylines-text-quest\") {\r\n      let answerText = `<strong>Answer:</strong> ${question[\"user-answer\"]}`\r\n      answerText = answerText.replace(/\\s\\s+/g, \" \")\r\n\r\n      if (answerText.length < 1000) {\r\n        answerText = answerText.padEnd(1000, \" \")\r\n      } else if (answerText.length > 1000) {\r\n        answerText = answerText.substring(0, 1000) + \"...\"\r\n      }\r\n\r\n      htmlContent += `<div class=\"answer manylines-text-quest\">${answerText}</div>`\r\n    } else if (question.qtype === \"graphing-quest\") {\r\n      const combinedCanvasImage = localStorage.getItem(`canvasImage-${index}`)\r\n      if (combinedCanvasImage) {\r\n        htmlContent += `<div ><strong>Answer:</strong></div>`\r\n        htmlContent += `<div class=\"answer graphing-quest\"><img src=\"${combinedCanvasImage}\" alt=\"Graphing Answer\" /></div>`\r\n      }\r\n    } else {\r\n      htmlContent += `<div class=\"answer\"> <strong>Answer:</strong> ${question[\"user-answer\"]}</div>`\r\n    }\r\n\r\n    htmlContent += `</div>`\r\n  })\r\n\r\n  htmlContent += `\r\n      </body>\r\n    </html>\r\n  `\r\n\r\n  // Dynamically import html2pdf.js on the client side\r\n  if (typeof window !== \"undefined\") {\r\n    const html2pdf = (await import(\"html2pdf.js\")).default\r\n\r\n    // Convert HTML to PDF\r\n    const opt = {\r\n      margin: 1,\r\n      filename: \"quiz_answers.pdf\",\r\n      image: { type: \"jpeg\", quality: 0.98 },\r\n      html2canvas: { scale: 2 },\r\n      jsPDF: { unit: \"in\", format: \"letter\", orientation: \"portrait\" },\r\n    }\r\n\r\n    html2pdf().from(htmlContent).set(opt).save()\r\n  }\r\n}\r\n","export const quiz = {\r\n  //qtype: \"mc-quest\" | \"float-num-quest\" | \"one-line-text-quest\" | \"manylines-text-quest\" | \"graphing-quest\";\r\n  questions: [\r\n    {\r\n      qtype: \"manylines-text-quest\",\r\n      question:\r\n        \"If the free market (competitive) equilibrium maximizes social efficiency, there is no rational for government intervention in an economy. Answer True or False and then defend your answer.\",\r\n      Ref: \"\",\r\n    },\r\n    {\r\n      qtype: \"float-num-quest\",\r\n      question:\r\n        \"Consider the market for cars with demand 𝑄𝐷=1000-10𝑃 and supply equal to 𝑄𝑆=10 + 5𝑃, the value of the consumer surplus is (answer in two decimal place):\",\r\n      Ref: \"\",\r\n    },\r\n    {\r\n      qtype: \"float-num-quest\",\r\n      question:\r\n        \"... Continuing from previous question, the value of the producer surplus is\",\r\n      Ref: \"\",\r\n    },\r\n    {\r\n      qtype: \"float-num-quest\",\r\n      question:\r\n        \"... Continuing from previous question, now the government forces the producer to charge only $50 and supply a quantity that consumers demand at this price. If the producer comply, the value of deadweight loss of over production is:\",\r\n      Ref: \"\",\r\n    },\r\n    {\r\n      qtype: \"graphing-quest\",\r\n      question:\r\n        \"A family makes the decision between enjoying a composite good consumption (C) and having kids (K). Assume the price of having kids is Pk and that of C is $1 as it is a composite good. Draw the budget constraint of this family putting C on the vertical axis and K on the horizontal axis and label all axes and your sketches.\",\r\n      Ref: \"\",\r\n    },\r\n    {\r\n      qtype: \"graphing-quest\",\r\n      question:\r\n        \"Now draw an the initial optimal point of this family as e1 with appropriate budget constraint and possible indifference curve. Now assuming that kids are inferior goods/services, show the new optimal point as e2 if the income of the family increases.\",\r\n      Ref: \"\",\r\n    },\r\n    {\r\n      qtype: \"graphing-quest\",\r\n      question:\r\n        \"Again, starting from the initial optimal point of this family as e1, suppose the price of having kids becomes cheaper, other things equal. Show the shift in the budget constraint and the possible point of family's new optimal point e2. And show the substitution and income effects of this decrease in price of having kids still assuming that kids are inferior goods.\",\r\n      Ref: \"\",\r\n    },\r\n\r\n    {\r\n      qtype: \"graphing-quest\",\r\n      question:\r\n        \"Labor Supply Question: The initial optimal point e1 of a consumer-worker in consumption (C)-leisure (l) space (leisure on the x-axis) is given below. Show the effect of an increase of passive (virtual) income YV (such as investment income from stocks) on the budget constraint if leisure is a normal good.\",\r\n      Ref: \"\",\r\n    },\r\n\r\n    {\r\n      qtype: \"graphing-quest\",\r\n      question:\r\n        \"Show the effect of decrease in wage rate in which the worker supplies more hours in the labor market (leisure is still normal good).\",\r\n      Ref: \"\",\r\n    },\r\n\r\n    {\r\n      qtype: \"graphing-quest\",\r\n      question:\r\n        \"Show substitution and income effects of this person graphically by decomposing the total effect in from the previous question.\",\r\n      Ref: \"\",\r\n    },\r\n  ],\r\n}\r\n","import React from \"react\"\r\n//import QuizManual from \"@/components/Quiz\";\r\nimport QuestionsComponent from \"../../components/QuestionsComponent\"\r\n//import { quiz } from \"./data\"; // Import the quiz data from data.ts\r\nimport { quiz } from \"./data\" // Import the quiz data from data2.ts\r\n\r\nconst quizName = \"Pset1\" // Name of the quiz\r\n\r\nconst user = {\r\n  data: {\r\n    user: {\r\n      id: \"1345\",\r\n    },\r\n  },\r\n}\r\n\r\nconst Pset1 = () => {\r\n  // const currentDate = new Date()\r\n  // const targetDate = new Date(\"2025-01-30T09:00:00\")\r\n  // const endDate = new Date(\"2025-01-04T23:59:00\")\r\n  // const isAvailable = currentDate >= targetDate && currentDate <= endDate\r\n\r\n  //const questions = quiz.questions // Get questions from the imported quiz data, is a\r\n  const questions = quiz.questions.filter((q) => q !== undefined) // Filter out undefined elementslist\r\n  const userId = user?.data.user.id\r\n  const isAvailable = true\r\n  if (!isAvailable) {\r\n    return (\r\n      <div className=\"container\">\r\n        <h1>Quiz is temporarely not available yet</h1>\r\n      </div>\r\n    )\r\n  } else {\r\n    return (\r\n      <>\r\n        {/* <Quiz questions={questions} userId={userId} quizName={quizName} /> */}\r\n        <QuestionsComponent\r\n          questions={questions}\r\n          userId={userId}\r\n          quizName={quizName}\r\n        />\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Pset1\r\n","// pages/index.js\r\n\r\nimport React from \"react\"\r\n\r\nconst Home = () => {\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"flex\",\r\n        justifyContent: \"centre\",\r\n        alignItems: \"centre\",\r\n        height: \"100vh\",\r\n      }}\r\n    >\r\n      <h1>\r\n        Welcome to Econ to Econ 33303! Navigate to the Assessment you want or\r\n        should access.\r\n      </h1>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Home\r\n","// Footer.js\r\nimport React from \"react\"\r\nimport \"./Footer.css\" // Optional: for styling\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p>\r\n        © 2025 aembaye. All rights reserved. No distribution of any material of\r\n        this page\r\n      </p>\r\n    </footer>\r\n  )\r\n}\r\n\r\nexport default Footer\r\n","// App.js\nimport React from \"react\"\n//import { BrowserRouter as Router, Routes, Route } from \"react-router-dom\"\nimport { HashRouter as Router, Routes, Route } from \"react-router-dom\"\nimport \"./App.css\"\nimport Navbar from \"./components/Navbar\"\n// import ActLes09 from \"./pages/quiz1/ActLes09\"\n// import Page3 from \"./pages/quiz3/Page3\"\nimport Pset1 from \"./pages/pset1/Pset1\"\nimport Home from \"./pages\"\nimport Footer from \"./components/Footer\" // Import the Footer component\n\nfunction App() {\n  return (\n    <Router>\n      <div className=\"app\">\n        <Navbar />\n        <div className=\"content\">\n          <Routes>\n            <Route path=\"/\" element={<Home />} />\n            {/* <Route path=\"/ActLes09\" element={<ActLes09 />} />\n            <Route path=\"/Page3\" element={<Page3 />} /> */}\n            <Route path=\"/Pset1\" element={<Pset1 />} />\n          </Routes>\n        </div>\n        <Footer />\n      </div>\n    </Router>\n  )\n}\n\nexport default App\n","//index.tsx\nimport React from \"react\"\nimport ReactDOM from \"react-dom\"\n//import ReactDOM from \"react-dom/client\";\nimport App from \"./App\"\nimport \"./index.css\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enabled\":\"CanvasToolbar_enabled__PovsZ\",\"disabled\":\"CanvasToolbar_disabled__2nCGV\",\"invertx\":\"CanvasToolbar_invertx__kyQcn\",\"fakeid\":\"CanvasToolbar_fakeid__2Dmxa\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAwwAAAMMBnc7+MwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEFSURBVEiJ7dSxLkRBFMbx31BIlkQlHoCap5BQLAXvQafV6DyLRLYSdkWv0dBQ0NAKkUhkj2bEzc3udW9xE5E9yVfNd85/5pyZSRGhzZhqtfoE8DcAKaVOqwD0mkBSSnNNAAmBAboR8V4qtoguVrNWMI9n3Gad4SQqHlRk9dHJvmns4qWwXqUrbESEspSMfazhekyhN9zhc8z6KWarAKN0jm0sI+WkmdyuPTyV/JdFSBXgATujjl3aYQf7+CjkXhTaPRYw+DbVETZLkMM6Leo3hGxhmHNfsVBnBk0hx4XcozqARpA8/GG+bQcJ6+rFTUQ81jGmlJYi4p6fa9da/IPvegL4Lb4A0uc9nRaYXwcAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAhQAAAIUB4uz/wQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHUSURBVEiJtda9ahRRFAfw3xHFJCabFEkawcYiYKMWVmohBHwFOwsfQLCxthOENHZqKxZG8DHSxcJC0Qcw7AqSNSoGci3mznp3nP0K8cBlZs7X/5z//RopJeMGlrGL1Bi7WJ4Uf9pk2cQVPMDPrJvHVra9GRc8BBARS7iKU4X6cn5+wvf8vljbIuJr4XuEdyml/YGmoGIdX/xLxayji/U2iu5iJXfwa1zbY2QOOznXE4YpuoE93D5m8lr2cLMN4BWu4TF+4HDGxIEOeng90DaW5BkVj/fyd6dhP4u5hq6Tnxdz7GZpL1eLlNIhvmEtq7Yj4mHhsoWng5Ir23b+rGO6Zc62fdAtnFewUdjOqyaylo3sMxJgqIMsvcJ5X8XrKFlCvwHQmwRQdjArwH5K6fc0AKvHAFjVoGcUwCwUdbKPHNNrOpw0RVN10MVCRCz8T4A6oI/FiIiTBKh5XFN1EDnRkETEnGrnH2sOSoC60rbqoR8R8zg3bQe102oB0DYPAwB/l/VkgJTSgeo+KDtoA6h1fSN2Me1nUV3JOj7iOT5k/csi5jNe4D2uj+og8lE7rIx4hjt4hIMRRZRyX7UYLqWUjoYsI35VLuCt6tKZ5h7ewa22XH8AgjMTispa6ucAAAAASUVORK5CYII=\""],"sourceRoot":""}